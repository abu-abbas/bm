import{c as B,r as I,j as H,b as x,k as U,fT as w,f as i,fx as g,u as b,hq as R,fR as V,e as T,fB as O,fC as N,g as G,fV as K,hr as Q,fJ as X,hC as Y,hp as L,hn as ee,ho as te}from"./vee-validate-i18n.esm-8795b5a9.js";import{_ as se}from"./UploadingImageTenant-8bd98e2e.js";/*! maska v2.1.10 | (c) Alexander Shabunevich | Released under the MIT license */var ae=Object.defineProperty,ne=(a,t,e)=>t in a?ae(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,P=(a,t,e)=>(ne(a,typeof t!="symbol"?t+"":t,e),e);const W={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class D{constructor(t={}){P(this,"opts",{}),P(this,"memo",new Map);const e={...t};if(e.tokens!=null){e.tokens=e.tokensReplace?{...e.tokens}:{...W,...e.tokens};for(const s of Object.values(e.tokens))typeof s.pattern=="string"&&(s.pattern=new RegExp(s.pattern))}else e.tokens=W;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((s,n)=>s.length-n.length):e.mask=e.mask[0]??""),e.mask===""&&(e.mask=null),this.opts=e}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const e=this.findMask(t);if(this.opts.mask==null||e==null)return!1;const s=this.process(t,e).length;return typeof this.opts.mask=="string"?s>=this.opts.mask.length:typeof this.opts.mask=="function"?s>=e.length:this.opts.mask.filter(n=>s>=n.length).length===this.opts.mask.length}findMask(t){const e=this.opts.mask;if(e==null)return null;if(typeof e=="string")return e;if(typeof e=="function")return e(t);const s=this.process(t,e.slice(-1).pop()??"",!1);return e.find(n=>this.process(t,n,!1).length>=s.length)??""}escapeMask(t){const e=[],s=[];return t.split("").forEach((n,o)=>{n==="!"&&t[o-1]!=="!"?s.push(o-s.length):e.push(n)}),{mask:e.join(""),escaped:s}}process(t,e,s=!0){var n;if(e==null)return t;const o=`value=${t},mask=${e},masked=${s?1:0}`;if(this.memo.has(o))return this.memo.get(o);const{mask:d,escaped:u}=this.escapeMask(e),f=[],y=this.opts.tokens!=null?this.opts.tokens:{},m=this.isReversed()?-1:1,_=this.isReversed()?"unshift":"push",j=this.isReversed()?0:d.length-1,M=this.isReversed()?()=>c>-1&&p>-1:()=>c<d.length&&p<t.length,C=v=>!this.isReversed()&&v<=j||this.isReversed()&&v>=j;let k,E=-1,c=this.isReversed()?d.length-1:0,p=this.isReversed()?t.length-1:0;for(;M();){const v=d.charAt(c),h=y[v],r=(h==null?void 0:h.transform)!=null?h.transform(t.charAt(p)):t.charAt(p);if(!u.includes(c)&&h!=null){if(r.match(h.pattern)!=null)f[_](r),h.repeated?(E===-1?E=c:c===j&&c!==E&&(c=E-m),j===E&&(c-=m)):h.multiple&&(c-=m),c+=m;else if(h.multiple){const l=((n=f[p-m])==null?void 0:n.match(h.pattern))!=null,A=d.charAt(c+m);l&&A!==""&&y[A]==null?(c+=m,p-=m):f[_]("")}else r===k?k=void 0:h.optional&&(c+=m,p-=m);p+=m}else s&&!this.isEager()&&f[_](v),r===v&&!this.isEager()?p+=m:k=v,this.isEager()||(c+=m);if(this.isEager())for(;C(c)&&(y[d.charAt(c)]==null||u.includes(c));)s?f[_](d.charAt(c)):d.charAt(c)===t.charAt(p)&&(p+=m),c+=m}return this.memo.set(o,f.join("")),this.memo.get(o)}}const Z=a=>JSON.parse(a.replaceAll("'",'"')),z=(a,t={})=>{const e={...t};return a.dataset.maska!=null&&a.dataset.maska!==""&&(e.mask=oe(a.dataset.maska)),a.dataset.maskaEager!=null&&(e.eager=q(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(e.reversed=q(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(e.tokensReplace=q(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(e.tokens=ie(a.dataset.maskaTokens)),e},q=a=>a!==""?!!JSON.parse(a):!0,oe=a=>a.startsWith("[")&&a.endsWith("]")?Z(a):a,ie=a=>{if(a.startsWith("{")&&a.endsWith("}"))return Z(a);const t={};return a.split("|").forEach(e=>{const s=e.split(":");t[s[0]]={pattern:new RegExp(s[1]),optional:s[2]==="optional",multiple:s[2]==="multiple",repeated:s[2]==="repeated"}}),t};class le{constructor(t,e={}){P(this,"items",new Map),P(this,"beforeinputEvent",s=>{const n=s.target,o=this.items.get(n);o.isEager()&&"inputType"in s&&s.inputType.startsWith("delete")&&o.unmasked(n.value).length<=1&&this.setMaskedValue(n,"")}),P(this,"inputEvent",s=>{if(s instanceof CustomEvent&&s.type==="input"&&s.detail!=null&&typeof s.detail=="object"&&"masked"in s.detail)return;const n=s.target,o=this.items.get(n),d=n.value,u=n.selectionStart,f=n.selectionEnd;let y=d;if(o.isEager()){const m=o.masked(d),_=o.unmasked(d);_===""&&"data"in s&&s.data!=null?y=s.data:_!==o.unmasked(m)&&(y=_)}if(this.setMaskedValue(n,y),"inputType"in s&&(s.inputType.startsWith("delete")||u!=null&&u<d.length))try{n.setSelectionRange(u,f)}catch{}}),this.options=e,typeof t=="string"?this.init(Array.from(document.querySelectorAll(t)),this.getMaskOpts(e)):this.init("length"in t?Array.from(t):[t],this.getMaskOpts(e))}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(t,e){const s=this.items.get(t),n=new D(z(t,this.getMaskOpts(e)));return JSON.stringify(s.opts)!==JSON.stringify(n.opts)}needUpdateValue(t){const e=t.dataset.maskaValue;return e==null&&t.value!==""||e!=null&&e!==t.value}getMaskOpts(t){const{onMaska:e,preProcess:s,postProcess:n,...o}=t;return o}init(t,e){for(const s of t){const n=new D(z(s,e));this.items.set(s,n),s.value!==""&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(t,e){const s=this.items.get(t);this.options.preProcess!=null&&(e=this.options.preProcess(e));const n=s.masked(e),o=s.unmasked(s.isEager()?n:e),d=s.completed(e),u={masked:n,unmasked:o,completed:d};e=n,this.options.postProcess!=null&&(e=this.options.postProcess(e)),t.value=e,t.dataset.maskaValue=e,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(f=>f(u)):this.options.onMaska(u)),t.dispatchEvent(new CustomEvent("maska",{detail:u})),t.dispatchEvent(new CustomEvent("input",{detail:u}))}}const J=new WeakMap,re=a=>{setTimeout(()=>{var t;((t=J.get(a))==null?void 0:t.needUpdateValue(a))===!0&&a.dispatchEvent(new CustomEvent("input"))})},ce=(a,t)=>{const e=a instanceof HTMLInputElement?a:a.querySelector("input"),s={...t.arg};if(e==null||(e==null?void 0:e.type)==="file")return;re(e);const n=J.get(e);if(n!=null){if(!n.needUpdateOptions(e,s))return;n.destroy()}if(t.value!=null){const o=t.value,d=u=>{o.masked=u.masked,o.unmasked=u.unmasked,o.completed=u.completed};s.onMaska=s.onMaska==null?d:Array.isArray(s.onMaska)?[...s.onMaska,d]:[s.onMaska,d]}J.set(e,new le(e,s))};const ue={class:"px-3 pb-0 mb-0"},de={class:"form-group row"},me=i("label",{for:"nama",class:"col-sm-3 col-form-label"}," Nama ",-1),pe={class:"col-sm-9"},he={key:0,class:"form-text text-danger fs-nano"},fe={class:"form-group row"},ke=i("label",{for:"lokasi",class:"col-sm-3 col-form-label"}," Lokasi Singkat ",-1),ve={class:"col-sm-9"},_e=i("span",{class:"form-text text-muted fs-nano"},"Contoh: Jakarta Pusat",-1),ge={key:0,class:"form-text text-danger fs-nano"},be={class:"form-group row"},ye=i("label",{for:"deskripsi",class:"col-sm-3 col-form-label"}," Deskripsi ",-1),Ee={class:"col-sm-9"},xe={key:0,class:"form-text text-danger fs-nano"},we={class:"form-group row"},Me=i("label",{class:"col-sm-3 col-form-label"}," Logo ",-1),Ae={class:"col-sm-9"},Re={key:0,class:"preview-wrapper"},Ve=["src","alt"],Te={class:"form-group row"},je=i("label",{for:"pic",class:"col-sm-3 col-form-label"}," Nama PIC ",-1),Ce={class:"col-sm-9"},Se={key:0,class:"form-text text-danger fs-nano"},Oe={class:"form-group row"},Ne=i("label",{for:"jabatan",class:"col-sm-3 col-form-label"}," Jabatan ",-1),Pe={class:"col-sm-9"},Fe={key:0,class:"form-text text-danger fs-nano"},$e={class:"form-group row"},Ie=i("label",{for:"hp",class:"col-sm-3 col-form-label"}," No HP ",-1),Le={class:"col-sm-9"},qe={key:0,class:"form-text text-danger fs-nano"},Je={class:"form-group row"},Be={class:"col-sm-9 offset-sm-3"},He={type:"submit",class:"btn btn-primary mr-2"},Ue=["onClick"],ze={__name:"ModalForm",props:{visible:{type:Boolean,required:!0,default:!1},initData:{type:[Object,null],required:!1,default:()=>{}},isEdit:{type:Boolean,required:!0,default:!1}},emits:["update:visible","submit"],setup(a,{emit:t}){const e=a,s=Math.random().toString(36).substring(2,9),n=B(()=>e.visible),o=B(()=>e.initData),d=I(null),u=I(null),f=I(!1),y=()=>X(()=>{d.value.focus(),o.value&&(u.value.setFieldValue("name",o.value.name),u.value.setFieldValue("short_location",o.value.short_location),u.value.setFieldValue("description",o.value.description),u.value.setFieldValue("pic",o.value.pic),u.value.setFieldValue("jabatan",o.value.jabatan),u.value.setFieldValue("hp",o.value.hp),f.value=!0)}),m=()=>t("update:visible",!1),_=()=>f.value=!1,j=(M,{resetForm:C})=>{var h;const k=e.isEdit,E=k?`Apakah Anda yakan untuk mengubah data ${(h=o.value)==null?void 0:h.name} ?`:`Apakah Anda yakin untuk menambahkan ${M.name} sebagai tenant?`,c=k?"put":"post",p=`backend.tenant.${k?"edit":"store"}`;let v=!1;k&&Object.keys(M).forEach(r=>{M[r]!=o.value[r]&&(v=!0)}),!(k&&!v)&&Y({title:`${k?"Ubah":"Tambah"} tenant`,text:E,icon:"question"},()=>{var r;return ee.post(te(p),{...M,_method:c,slug:k?(r=o.value)==null?void 0:r.slug:null},{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l).catch(l=>{let A=l.response.status,S=l.response.data.message;if([409,417,500].includes(A)){L.showValidationMessage(`${S}`);return}if(A=="422"){const F=l.response.data.errors;S=Object.keys(F).map($=>Array.isArray(F[$])?F[$].join(", "):F[$]).join(", "),L.showValidationMessage(`${S}`);return}})}).then(({value:r,isConfirmed:l,isDismissed:A})=>{var S;if(A)return!1;l&&r.data.status=="success"&&(L.fire({title:"Tambah tenant",text:r.data.message,icon:"success"}),C(),t("submit",(S=r.data)==null?void 0:S.data),m())})};return(M,C)=>{const k=H("FontAwesomeIcon"),E=H("b-modal");return x(),U(E,{id:b(s),visible:n.value,"onUpdate:visible":C[0]||(C[0]=c=>n.value=c),title:`${e.isEdit?"Ubah":"Tambah"} Tenant`,"hide-footer":"",onShown:y,onHide:m},{default:w(({hide:c})=>[i("div",ue,[g(b(Q),{ref_key:"formRef",ref:u,onSubmit:j},{default:w(()=>{var p,v,h;return[i("div",de,[me,i("div",pe,[g(b(R),{label:"Nama tenant",name:"name",rules:"required|min:3|max:200"},{default:w(({field:r,errorMessage:l})=>[i("input",V({id:"nama",ref_key:"nameInput",ref:d},r,{type:"text",class:"form-control",placeholder:"Masukkan nama tenant"}),null,16),l?(x(),T("div",he,O(l),1)):N("",!0)]),_:1})])]),i("div",fe,[ke,i("div",ve,[g(b(R),{label:"Lokasi singkat",name:"short_location",rules:"max:50"},{default:w(({field:r,errorMessage:l})=>[i("input",V({id:"lokasi"},r,{type:"text",class:"form-control",placeholder:"Masukkan lokasi singkat tenant"}),null,16),_e,l?(x(),T("div",ge,O(l),1)):N("",!0)]),_:1})])]),i("div",be,[ye,i("div",Ee,[g(b(R),{label:"Deskripsi",name:"description",rules:"max:2000"},{default:w(({field:r,errorMessage:l})=>[i("textarea",V({id:"deskripsi"},r,{type:"text",class:"form-control custom-scroll",placeholder:"Masukkan deskripsi tentang tenant"}),null,16),l?(x(),T("div",xe,O(l),1)):N("",!0)]),_:1})])]),i("div",we,[Me,i("div",Ae,[f.value?(x(),T("div",Re,[i("img",{src:(v=(p=o.value)==null?void 0:p.logo)==null?void 0:v.thumb,alt:(h=o.value)==null?void 0:h.name,class:"image-preview"},null,8,Ve),i("a",{href:"javascript:void(0)",onClick:_},[g(k,{icon:["fas","trash-alt"]})])])):(x(),U(b(R),{key:1,label:"Logo",name:"logo",rules:"required"},{default:w(({field:r,errorMessage:l})=>[g(se,V(r,{"error-message":l}),null,16,["error-message"])]),_:1}))])]),i("div",Te,[je,i("div",Ce,[g(b(R),{label:"Nama PIC",name:"pic",rules:"max:200"},{default:w(({field:r,errorMessage:l})=>[i("input",V({id:"pic"},r,{type:"text",class:"form-control",placeholder:"Masukkan nama pic"}),null,16),l?(x(),T("div",Se,O(l),1)):N("",!0)]),_:1})])]),i("div",Oe,[Ne,i("div",Pe,[g(b(R),{label:"Jabatan",name:"jabatan",rules:"max:200"},{default:w(({field:r,errorMessage:l})=>[i("input",V({id:"jabatan"},r,{type:"text",class:"form-control",placeholder:"Masukkan nama jabatan"}),null,16),l?(x(),T("div",Fe,O(l),1)):N("",!0)]),_:1})])]),i("div",$e,[Ie,i("div",Le,[g(b(R),{label:"No HP",name:"hp"},{default:w(({field:r,errorMessage:l})=>[G(i("input",V({id:"hp"},r,{"data-maska":"08## #### #### ####",type:"text",class:"form-control",placeholder:"Masukkan no hp"}),null,16),[[b(ce)]]),l?(x(),T("div",qe,O(l),1)):N("",!0)]),_:1})])]),i("div",Je,[i("div",Be,[i("button",He,[g(k,{icon:["fas","save"],class:"mr-1"}),K(" Simpan ")]),i("button",{type:"reset",class:"btn btn-light",onClick:c}," Batal ",8,Ue)])])]}),_:2},1536)])]),_:1},8,["id","visible","title"])}}};export{ze as _};
