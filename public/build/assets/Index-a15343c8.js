import{fl as h,fq as K,fD as E,o as f,c as $,fp as e,gM as N,u as B,r as x,a as F,hg as Q,fs as q,gS as r,g_ as W,fv as C,gT as L,gV as ee,fd as te,fm as J,fo as o,g$ as le,gZ as D,fu as p,ft as ae,_ as X,he as Z,gW as T,gX as U,hh as se,gY as Y,fB as M,fn as G,fr as R,hf as oe}from"./vee-validate-i18n.esm-b9e812f9.js";import{i as z}from"./isMobile-b3e8a064.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{u as ie}from"./vue-multiselect.esm-6b6e0179.js";const re=["id"],ue={class:"header"},ce=e("span",null,null,-1),de=[ce],me={class:"static-title"},_e=e("h2",null,"Fixed Header",-1),pe={class:"body"},ge={__name:"BottomSheet",props:{visible:{type:Boolean,required:!0,default:!1}},emits:["update:visible","show","hide"],setup(V,{emit:w}){const y=V,v=Math.random().toString(36).substring(2,9),d=h(null),S=h(null),k=h(null),b=h(null),a=h(!1),H=h(null),u=h(null),n=K(()=>y.visible),m=t=>{k.value.style.height=`${t}vh`,d.value.classList.toggle("fullscreen",t===100)},_=()=>{d.value.classList.remove("show"),document.body.style.overflowY="auto",w("update:visible",!1),w("hide")},i=()=>{d.value.classList.add("show"),document.body.style.overflowY="hidden",m(50),w("update:visible",!0),w("show")},l=t=>{var s;a.value=!0,H.value=t.pageY||((s=t.touches)==null?void 0:s[0].pageY),u.value=parseInt(k.value.style.height),d.value.classList.add("dragging")},g=t=>{var A;if(!a.value)return;const s=H.value-(t.pageY||((A=t.touches)==null?void 0:A[0].pageY)),I=u.value+s/window.innerHeight*100;m(I)},c=()=>{a.value=!1,d.value.classList.remove("dragging");const t=parseInt(k.value.style.height);t<25?_():t>75?m(100):m(50)};return E(()=>n.value,t=>t?i():_()),(t,s)=>(f(),$("div",{id:B(v),ref_key:"bottomSheet",ref:d,class:"bottom-sheet"},[e("div",{ref_key:"sheetOverlay",ref:S,class:"sheet-overlay",onClick:_},null,512),e("div",{ref_key:"sheetContent",ref:k,class:"content"},[e("div",ue,[e("div",{ref_key:"dragIcon",ref:b,class:"drag-icon",onMousedown:l,onMousemove:g,onMouseup:c,onTouchstart:l,onTouchmove:g,onTouchend:c},de,544),e("div",me,[N(t.$slots,"fixed-header",{},()=>[_e])])]),e("div",pe,[N(t.$slots,"header"),N(t.$slots,"default")])],512)],8,re))}};const P={__name:"Select",props:{options:{type:[Array,null],required:!0,default:()=>[]},selected:{type:[Object,null],required:!1,default:()=>{}},multiselectOptions:{type:[Object,null],required:!1,default:()=>({trackBy:"key",label:"value",selectLabel:"",selectedLabel:"",deselectLabel:"",placeholder:""})},loading:{type:Boolean,required:!1,default:!1}},emits:["select","remove","update:selected"],setup(V,{expose:w,emit:y}){const v=V,d=Math.random().toString(36).substring(2,9),S=K(()=>v.options),k=K(()=>v.loading),b=h(v.selected||null),a=(u,n,m)=>y(m,u,n),H=()=>{b.value=null,y("update:selected",null)};return E(()=>b.value,u=>y("update:selected",u)),w({removeSelected:H}),(u,n)=>{const m=x("vue-multiselect");return f(),F(m,W({id:B(d),modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=_=>b.value=_)},V.multiselectOptions,{options:S.value,disabled:k.value,loading:k.value,class:"dropdown-custom",onSelect:n[1]||(n[1]=(_,i)=>a(_,i,"select")),onRemove:n[2]||(n[2]=(_,i)=>a(_,i,"remove"))}),Q({noResult:r(()=>[L("Data tidak ditemukan")]),noOptions:r(()=>[L("Tidak ada data")]),_:2},[q(Object.keys(u.$slots),_=>({name:_,fn:r(i=>[i?N(u.$slots,_,W({key:0},i,{disabled:k.value})):C("",!0)])}))]),1040,["id","modelValue","options","disabled","loading"])}}};const ve={class:"checkout-wrapper"},fe=e("h2",null,"Ajukan ketertarikan",-1),he={class:"form-group mt-4"},ke=e("label",{class:"form-label text-muted"},"Kegiatan",-1),be={class:"d-flex flex-column"},ye={class:"text-sm text-muted"},xe={class:"d-flex flex-column"},we={class:"text-sm text-muted fw-500"},$e={key:0,class:"text-danger fs-sm mt-2"},Se={key:0,class:"form-group"},Ie=e("label",{class:"form-label text-muted"},"RSK",-1),Le={key:0,class:"text-danger fs-sm mt-2"},Ve={key:1,class:"form-group"},Be=e("label",{class:"form-label text-muted"},"Akun",-1),He={class:"d-flex flex-column"},je={class:"text-sm text-muted"},Ce={class:"d-flex align-items-center mt-2"},Fe={class:"text-sm fw-500"},Oe={class:"d-flex flex-column"},qe={class:"text-sm text-muted fw-500"},Ae={class:"d-flex align-items-center mt-2"},De={class:"text-sm fw-500"},Ne={key:0,class:"text-danger fs-sm mt-2"},Re={key:2,class:"form-group"},Ke=e("label",{class:"form-label text-muted"},"Nilai Ketertarikan",-1),Te={key:0,class:"text-danger fs-sm mt-2"},Ue={__name:"Index",props:{tenantSlug:{type:[String,null],required:!0,default:null},productSlug:{type:[String,null],required:!0,default:null}},setup(V){const w=V,y=h(!1),v=h(null),d=h(null),S=h(null),k=h(null),b=h(0),a=h({kegiatan:{options:[],selected:null,props:{trackBy:"kode_kegiatan",label:"nama_kegiatan",placeholder:"Pilih kegiatan"},loading:!1},rsk:{options:[],selected:null,props:{trackBy:"nama_rsk",label:"nama_rsk",placeholder:"Pilih rsk"},loading:!1},akun:{options:[],selected:null,props:{trackBy:"id_rskbas",label:"nama_akun",placeholder:"Pilih akun"},loading:!1}}),H=()=>{if(!X.user){Z();return}y.value=!0},u=(i="kegiatan",l=null,g=null)=>{a.value[i].loading=!0,T.get(U("backend.budget.get",{type:i,value:l,addons:g})).then(c=>a.value[i].options=[...c.data.data]).catch(()=>a.value[i].options=[]).finally(()=>a.value[i].loading=!1)},n=ee.debounce(i=>{const l="0123456789.",g=[...i.target.value].filter(s=>l.includes(s)).join("");i.target.value=g;const c=parseFloat(i.target.value.split(".").join("")||0),t=parseFloat(a.value.akun.selected.dpa_rsk||0);if(c<0){b.value=0,i.target.value=0;return}if(c>t){b.value=t,i.target.value=t.toLocaleString("id-ID",{style:"decimal"});return}b.value=c,i.target.value=c.toLocaleString("id-ID",{style:"decimal"})},500);te("voi_value",(i,[l])=>{var g;return i==0?"Nilai ketertarikan tidak boleh 0":i<=parseFloat(l==null?void 0:l.dpa_rsk)?!0:`Nilai ketertarikan maksimal ${(g=parseFloat(l==null?void 0:l.dpa_rsk))==null?void 0:g.toLocaleString("id-ID",{style:"decimal"})}`});const m=()=>setTimeout(()=>k.value.focus(),250);E([()=>a.value.kegiatan.selected,()=>a.value.rsk.selected],([i,l],[g,c])=>{var t,s,I;i&&JSON.stringify(g)!=JSON.stringify(i)&&(a.value.rsk.selected=null,a.value.akun.selected=null,(t=d.value)==null||t.removeSelected(),(s=S.value)==null||s.removeSelected(),u("rsk",i.kode_kegiatan)),l&&JSON.stringify(l)!=JSON.stringify(c)&&(a.value.akun.selected=null,(I=S.value)==null||I.removeSelected(),u("akun",a.value.kegiatan.selected.kode_kegiatan,l.kode_rsk))});const _=async()=>{const{valid:i}=await v.value.validate();i&&se({title:"Buat ketertarikan",text:"Apakah Anda yakin untuk membuat ketertarikan ini?",icon:"question"},()=>T.post(U("backend.budget.voi"),{form:v.value.getValues()}).then(l=>l).catch(l=>{let g=l.response.status,c=l.response.data.message;if([409,417,500].includes(g)){Y.showValidationMessage(`${c}`);return}if(g=="422"){const t=l.response.data.errors;c=Object.keys(t).map(s=>Array.isArray(t[s])?t[s].join(", "):t[s]).join(", "),Y.showValidationMessage(`${c}`);return}})).then(({value:l,isConfirmed:g,isDismissed:c})=>{if(c)return!1;g&&l.data.status=="success"&&(Y.fire({title:"Tambah ketertarikan",text:l.data.message,icon:"success"}),console.log({value:l,isConfirmed:g,isDismissed:c}))})};return J(()=>{u(),console.log({props:w})}),(i,l)=>{const g=x("FontAwesomeIcon");return f(),$("div",ve,[e("button",{class:"btn btn-lg btn-primary",onClick:H},[o(g,{icon:["fas","plus"]}),L(" Ketertarikan ")]),o(ge,{visible:y.value,"onUpdate:visible":l[8]||(l[8]=c=>y.value=c)},{"fixed-header":r(()=>[fe]),default:r(()=>[o(B(le),{ref_key:"formRef",ref:v},{default:r(({errors:c})=>[e("div",he,[ke,o(B(D),{modelValue:a.value.kegiatan.selected,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.kegiatan.selected=t),label:"Kegiatan",name:"kegiatan",rules:"required"},{default:r(({errorMessage:t})=>[o(P,{selected:a.value.kegiatan.selected,"onUpdate:selected":l[0]||(l[0]=s=>a.value.kegiatan.selected=s),options:a.value.kegiatan.options,"multiselect-options":a.value.kegiatan.props,loading:a.value.kegiatan.loading},{option:r(s=>[e("div",be,[e("strong",ye,p(s.option.kode_kegiatan),1),e("span",null,p(s.option.nama_kegiatan),1)])]),singleLabel:r(s=>[e("div",xe,[e("strong",we,p(s.option.kode_kegiatan),1),e("span",null,p(s.option.nama_kegiatan),1)])]),_:1},8,["selected","options","multiselect-options","loading"]),t?(f(),$("div",$e,p(t),1)):C("",!0)]),_:1},8,["modelValue"])]),a.value.kegiatan.selected?(f(),$("div",Se,[Ie,o(B(D),{modelValue:a.value.rsk.selected,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.rsk.selected=t),label:"RSK",name:"rsk",rules:"required"},{default:r(({errorMessage:t})=>[o(P,{ref_key:"refRsk",ref:d,selected:a.value.rsk.selected,"onUpdate:selected":l[2]||(l[2]=s=>a.value.rsk.selected=s),options:a.value.rsk.options,"multiselect-options":a.value.rsk.props,loading:a.value.rsk.loading},null,8,["selected","options","multiselect-options","loading"]),t?(f(),$("div",Le,p(t),1)):C("",!0)]),_:1},8,["modelValue"])])):C("",!0),a.value.rsk.selected?(f(),$("div",Ve,[Be,o(B(D),{modelValue:a.value.akun.selected,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.akun.selected=t),label:"Akun",name:"akun",rules:"required"},{default:r(({errorMessage:t})=>[o(P,{ref_key:"refAkun",ref:S,selected:a.value.akun.selected,"onUpdate:selected":l[4]||(l[4]=s=>a.value.akun.selected=s),options:a.value.akun.options,"multiselect-options":a.value.akun.props,loading:a.value.akun.loading,onSelect:m},{option:r(s=>{var I;return[e("div",He,[e("strong",je,p(s.option.kode_akun),1),e("span",null,p(s.option.nama_akun),1),e("div",Ce,[e("strong",Fe,"Nilai Anggaran: "+p((I=parseFloat(s.option.dpa_rsk||0))==null?void 0:I.toLocaleString("id-ID",{style:"decimal"})),1)])])]}),singleLabel:r(s=>{var I;return[e("div",Oe,[e("strong",qe,p(s.option.kode_akun),1),e("span",null,p(s.option.nama_akun),1),e("div",Ae,[e("strong",De,"Nilai Anggaran: "+p((I=parseFloat(s.option.dpa_rsk||0))==null?void 0:I.toLocaleString("id-ID",{style:"decimal"})),1)])])]}),_:1},8,["selected","options","multiselect-options","loading"]),t?(f(),$("div",Ne,p(t),1)):C("",!0)]),_:1},8,["modelValue"])])):C("",!0),a.value.akun.selected?(f(),$("div",Re,[Ke,o(B(D),{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=t=>b.value=t),label:"Nilai Ketertarikan",name:"voi",rules:"required|voi_value:@akun"},{default:r(({errorMessage:t})=>[e("input",{ref_key:"refVoi",ref:k,type:"text",class:"form-control text-right custom-form-control font-bold",onKeyup:l[6]||(l[6]=(...s)=>B(n)&&B(n)(...s))},null,544),t?(f(),$("div",Te,p(t),1)):C("",!0)]),_:1},8,["modelValue"])])):C("",!0),e("button",{type:"button",class:ae({"btn btn-primary btn-block":!0,disabled:c}),onClick:_}," Simpan ",2)]),_:1},512)]),_:1},8,["visible"])])}}};const Me={class:"mainImage"},Ye={class:"gradient-background bg-white"},Pe={class:"container"},Ee={class:"text-dark mt-2"},Je={class:"mt-2 text-dark"},We={class:"text-info mt-4"},ze={class:"detail"},Xe={class:"text-dark",style:{"white-space":"pre-line"}},Ze={__name:"Index",props:{tenantSlug:{type:[String,null],required:!0,default:null},productSlug:{type:[String,null],required:!0,default:null}},setup(V){const w=V,y=n=>window.location=n,v=h({}),d=M(w,"tenantSlug"),S=M(w,"productSlug"),k=h(null),b=h([]),a=function(){window.doLogout.apply(this,arguments)},H=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n),u=async()=>{try{T.get(U("backend.landing.product.getsingelproduct",{tenant:d.value,product:S.value})).then(n=>{var m,_;if(n.data.data==null)return y("/404");v.value=n.data.data,b.value=[...((_=(m=n==null?void 0:n.data)==null?void 0:m.data)==null?void 0:_.images)||[]]}).catch(n=>{console.log(n)})}catch(n){console.log(n)}};return J(()=>{u(),k.value&&k.value.addEventListener("click",a)}),G(()=>{k.value&&k.value.removeEventListener("click",a)}),(n,m)=>{const _=x("b-icon"),i=x("b-nav-item"),l=x("b-nav"),g=x("b-carousel-slide"),c=x("b-carousel"),t=x("FontAwesomeIcon");return f(),$("div",null,[o(l,{tabs:"",fill:"",class:"fixed-top bg-white"},{default:r(()=>[o(i,{class:"text-left"},{default:r(()=>[o(_,{icon:"arrow-left"}),L(" "+p(v.value.tenant_name),1)]),_:1})]),_:1}),e("div",Me,[o(c,{id:"carousel",controls:!0,indicators:!0,interval:0},{default:r(()=>[(f(!0),$(R,null,q(b.value,(s,I)=>(f(),F(g,{key:I,"img-src":s},null,8,["img-src"]))),128))]),_:1})]),e("div",Ye,[e("div",Pe,[e("h3",Ee,p(v.value.nama_barang),1),e("span",Je,[o(_,{icon:"shop"}),L(" Product By: "+p(v.value.tenant_name),1)]),e("h4",We,[o(_,{icon:"tags",varian:"info"}),L(" "+p(H(v.value.price)),1)]),e("div",ze,[e("span",Xe,p(v.value.description),1)]),B(X).user?(f(),F(Ue,{key:1,"tenant-slug":d.value,"product-slug":S.value,class:"mt-3"},null,8,["tenant-slug","product-slug"])):(f(),$("button",{key:0,class:"btn btn-lg btn-primary mt-3 mb-5",onClick:m[0]||(m[0]=s=>B(Z)())},[o(t,{icon:["fas","plus"]}),L(" Ketertarikan ")]))])]),o(l,{tabs:"",justified:"",class:"fixed-bottom bg-white"},{default:r(()=>[o(i,{active:"",onClick:m[1]||(m[1]=s=>y("/"))},{default:r(()=>[o(_,{icon:"house",variant:"primary"})]),_:1}),o(i,{onClick:m[2]||(m[2]=s=>y("/"+d.value))},{default:r(()=>[o(_,{icon:"shop",variant:"primary"})]),_:1}),o(i,null,{default:r(()=>[o(_,{icon:"cart",variant:"primary"})]),_:1})]),_:1})])}}},Ge=ne(Ze,[["__scopeId","data-v-7a6a1ae6"]]),Qe={class:"container home-wrapper mt-5"},et={class:"row"},tt={class:"col-12"},lt={class:"col-12 d-block d-sm-none mb-3"},at={class:"col-12 d-none d-sm-block d-md-none mb-3"},st={class:"col-12 d-none d-md-block d-lg-none mb-3"},ot={class:"imagedekstop"},nt={class:"row"},it={class:"col-lg-6 d-none d-lg-block d-xl-block"},rt={class:"col-12 mb-2"},ut={class:"col-12"},ct={class:"col-sm-12 col-xs-12 col-lg-6 d-flex align-items-center mb-5"},dt={class:"row"},mt={class:"col-12"},_t={class:"b-text text-warning nama-tenant"},pt={class:"col-12"},gt={class:"b-text text-dark nama-product"},vt={class:"col-12 my-3"},ft={style:{"white-space":"pre-line"}},ht={class:"col-12 mt-2"},kt={class:"b-text text-dark harga-product"},bt={class:"col-12 mb-3 d-none d-lg-block d-xl-block"},yt={class:"b-text text-muted harga-product"},xt={class:"col-lg-8 col-sm-12 col-xs-12 col-md-12 w-100"},wt={__name:"Index",setup(V){const w=u=>window.location=u,y=ie(),v=h(null),d=h({}),S=h(""),k=h(["https://th.bing.com/th/id/OIP.3vxFi4e09BLrfl2LRKlWHgHaHa?pid=ImgDet&w=910&h=910&rs=1","https://img.freepik.com/free-photo/pair-trainers_144627-3800.jpg","https://images.pexels.com/photos/19090/pexels-photo.jpg?cs=srgb&dl=pexels-web-donut-19090.jpg"]),b=u=>{S.value=u},a=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(u),H=async()=>{try{T.get(U("backend.landing.product.getsingelproduct",{tenant:y.params.tenantSlug,product:y.params.productSlug})).then(u=>{var n,m;if(u.data.data==null)return w("/404");d.value=u.data.data,S.value=[...((m=(n=u==null?void 0:u.data)==null?void 0:n.data)==null?void 0:m.images)||[]]}).catch(u=>{console.log(u)})}catch(u){console.log(u)}};return J(()=>{H(),v.value&&v.value.addEventListener("click",function(){window.doLogout.apply(this,arguments)})}),G(()=>{v.value&&v.value.removeEventListener("click")}),(u,n)=>{const m=x("b-icon"),_=x("b-breadcrumb-item"),i=x("b-breadcrumb"),l=x("b-carousel-slide"),g=x("b-carousel"),c=x("b-img"),t=x("b-col"),s=x("b-row"),I=x("b-badge"),A=x("b-button");return f(),$("div",Qe,[e("div",et,[e("div",tt,[o(i,null,{default:r(()=>[o(_,{href:"#home"},{default:r(()=>[o(m,{icon:"house-fill",scale:"1.25","shift-v":"1.25","aria-hidden":"true"}),L(" "+p(d.value.tenant_name),1)]),_:1}),o(_,{active:""},{default:r(()=>[L(p(d.value.product_name),1)]),_:1})]),_:1})]),e("div",lt,[o(g,{id:"carousel",controls:!0,indicators:!0,"img-height":"25rem",interval:0},{default:r(()=>[(f(!0),$(R,null,q(k.value,(j,O)=>(f(),F(l,{key:O,"img-src":j},null,8,["img-src"]))),128))]),_:1})]),e("div",at,[o(g,{id:"carousel",controls:!0,indicators:!0,"img-height":"25rem",interval:0},{default:r(()=>[(f(!0),$(R,null,q(k.value,(j,O)=>(f(),F(l,{key:O,"img-src":j},null,8,["img-src"]))),128))]),_:1})]),e("div",st,[o(g,{id:"carousel",controls:!0,indicators:!0,"img-height":"25rem",interval:0},{default:r(()=>[(f(!0),$(R,null,q(k.value,(j,O)=>(f(),F(l,{key:O,"img-src":j},null,8,["img-src"]))),128))]),_:1})]),e("div",ot,[e("div",nt,[e("div",it,[e("div",rt,[o(c,{src:S.value,"fluid-grow":"",alt:"Responsive image",style:{width:"100%",height:"27rem","border-radius":"1rem"}},null,8,["src"])]),e("div",ut,[o(s,{class:"mb-3"},{default:r(()=>[o(t,{onClick:n[0]||(n[0]=j=>b("https://images.pexels.com/photos/19090/pexels-photo.jpg?cs=srgb&dl=pexels-web-donut-19090.jpg"))},{default:r(()=>[o(c,{contain:"",thumbnail:"","fluid-grow":"",src:"https://images.pexels.com/photos/19090/pexels-photo.jpg?cs=srgb&dl=pexels-web-donut-19090.jpg",alt:"Image 1",style:{width:"100%",height:"100%"}})]),_:1}),o(t,{onClick:n[1]||(n[1]=j=>b("https://img.freepik.com/free-photo/pair-trainers_144627-3800.jpg"))},{default:r(()=>[o(c,{contain:"",thumbnail:"","fluid-grow":"",src:"https://img.freepik.com/free-photo/pair-trainers_144627-3800.jpg",alt:"Image 2",style:{width:"100%",height:"100%"}})]),_:1}),o(t,{onClick:n[2]||(n[2]=j=>b("https://th.bing.com/th/id/OIP.3vxFi4e09BLrfl2LRKlWHgHaHa?pid=ImgDet&w=910&h=910&rs=1"))},{default:r(()=>[o(c,{contain:"",thumbnail:"","fluid-grow":"",src:"https://th.bing.com/th/id/OIP.3vxFi4e09BLrfl2LRKlWHgHaHa?pid=ImgDet&w=910&h=910&rs=1",alt:"Image 3",style:{width:"100%",height:"100%"}})]),_:1})]),_:1})])]),e("div",ct,[e("div",dt,[e("div",mt,[e("h5",_t,p(d.value.tenant_name),1)]),e("div",pt,[e("h3",gt,p(d.value.product_name),1)]),e("div",vt,[e("span",ft,p(d.value.description),1)]),e("div",ht,[e("h4",kt,p(a(d.value.price)),1)]),e("div",bt,[e("h5",yt,[o(I,{variant:"danger"},{default:r(()=>[L("15%")]),_:1}),L(),e("del",null,p(a(d.value.price+d.value.price*.15)),1)])]),e("div",xt,[o(A,{class:"w-100",size:"lg",variant:"primary"},{default:r(()=>[o(m,{icon:"cart-fill",class:"mr-2"}),L(" Tambah Ke Keranjang")]),_:1})])])])])])])])}}};const Vt={__name:"Index",props:{tenantSlug:{type:[String,null],required:!0,default:null},productSlug:{type:[String,null],required:!0,default:null}},setup(V){const w=V,y=M(w,"tenantSlug"),v=M(w,"productSlug"),d=K(()=>!z(window.navigator).phone||z(window.navigator).tablet);return(S,k)=>(f(),F(oe(d.value?wt:Ge),{"tenant-slug":y.value,"product-slug":v.value},null,8,["tenant-slug","product-slug"]))}};export{Vt as default};
