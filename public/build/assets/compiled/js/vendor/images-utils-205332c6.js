import{c as Oi}from"./bootstrap-utils-9ffca17a.js";/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Ue(m,l){var u=Object.keys(m);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(m);l&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(m,b).enumerable})),u.push.apply(u,d)}return u}function ie(m){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?Ue(Object(u),!0).forEach(function(d){Ri(m,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(u)):Ue(Object(u)).forEach(function(d){Object.defineProperty(m,d,Object.getOwnPropertyDescriptor(u,d))})}return m}function Ci(m,l){if(!(m instanceof l))throw new TypeError("Cannot call a class as a function")}function He(m,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,Ye(d.key),d)}}function Ai(m,l,u){return l&&He(m.prototype,l),u&&He(m,u),Object.defineProperty(m,"prototype",{writable:!1}),m}function Ri(m,l,u){return l=Ye(l),l in m?Object.defineProperty(m,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[l]=u,m}function ae(){return ae=Object.assign?Object.assign.bind():function(m){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(m[d]=u[d])}return m},ae.apply(this,arguments)}function Ni(m,l){if(typeof m!="object"||m===null)return m;var u=m[Symbol.toPrimitive];if(u!==void 0){var d=u.call(m,l||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(m)}function Ye(m){var l=Ni(m,"string");return typeof l=="symbol"?l:String(l)}var je={exports:{}};(function(m){typeof window>"u"||function(l){var u=l.HTMLCanvasElement&&l.HTMLCanvasElement.prototype,d=l.Blob&&function(){try{return!!new Blob}catch{return!1}}(),b=d&&l.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),w=l.BlobBuilder||l.WebKitBlobBuilder||l.MozBlobBuilder||l.MSBlobBuilder,N=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,O=(d||w)&&l.atob&&l.ArrayBuffer&&l.Uint8Array&&function(D){var x,B,L,V,P,y,G,k,tt;if(x=D.match(N),!x)throw new Error("invalid data URI");for(B=x[2]?x[1]:"text/plain"+(x[3]||";charset=US-ASCII"),L=!!x[4],V=D.slice(x[0].length),L?P=atob(V):P=decodeURIComponent(V),y=new ArrayBuffer(P.length),G=new Uint8Array(y),k=0;k<P.length;k+=1)G[k]=P.charCodeAt(k);return d?new Blob([b?G:y],{type:B}):(tt=new w,tt.append(y),tt.getBlob(B))};l.HTMLCanvasElement&&!u.toBlob&&(u.mozGetAsFile?u.toBlob=function(D,x,B){var L=this;setTimeout(function(){B&&u.toDataURL&&O?D(O(L.toDataURL(x,B))):D(L.mozGetAsFile("blob",x))})}:u.toDataURL&&O&&(u.msToBlob?u.toBlob=function(D,x,B){var L=this;setTimeout(function(){(x&&x!=="image/png"||B)&&u.toDataURL&&O?D(O(L.toDataURL(x,B))):D(L.msToBlob(x))})}:u.toBlob=function(D,x,B){var L=this;setTimeout(function(){D(O(L.toDataURL(x,B)))})})),m.exports?m.exports=O:l.dataURLtoBlob=O}(window)})(je);var ze=je.exports,Bi=function(l){return typeof Blob>"u"?!1:l instanceof Blob||Object.prototype.toString.call(l)==="[object Blob]"},We={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Si=typeof window<"u"&&typeof window.document<"u",Ct=Si?window:{},re=function(l){return l>0&&l<1/0},Ii=Array.prototype.slice;function ge(m){return Array.from?Array.from(m):Ii.call(m)}var Li=/^image\/.+$/;function pe(m){return Li.test(m)}function Pi(m){var l=pe(m)?m.substr(6):"";return l==="jpeg"&&(l="jpg"),".".concat(l)}var Fe=String.fromCharCode;function ki(m,l,u){var d="",b;for(u+=l,b=l;b<u;b+=1)d+=Fe(m.getUint8(b));return d}var Ui=Ct.btoa;function Xe(m,l){for(var u=[],d=8192,b=new Uint8Array(m);b.length>0;)u.push(Fe.apply(null,ge(b.subarray(0,d)))),b=b.subarray(d);return"data:".concat(l,";base64,").concat(Ui(u.join("")))}function Hi(m){var l=new DataView(m),u;try{var d,b,w;if(l.getUint8(0)===255&&l.getUint8(1)===216)for(var N=l.byteLength,O=2;O+1<N;){if(l.getUint8(O)===255&&l.getUint8(O+1)===225){b=O;break}O+=1}if(b){var D=b+4,x=b+10;if(ki(l,D,4)==="Exif"){var B=l.getUint16(x);if(d=B===18761,(d||B===19789)&&l.getUint16(x+2,d)===42){var L=l.getUint32(x+4,d);L>=8&&(w=x+L)}}}if(w){var V=l.getUint16(w,d),P,y;for(y=0;y<V;y+=1)if(P=w+y*12+2,l.getUint16(P,d)===274){P+=8,u=l.getUint16(P,d),l.setUint16(P,1,d);break}}}catch{u=1}return u}function zi(m){var l=0,u=1,d=1;switch(m){case 2:u=-1;break;case 3:l=-180;break;case 4:d=-1;break;case 5:l=90,d=-1;break;case 6:l=90;break;case 7:l=90,u=-1;break;case 8:l=-90;break}return{rotate:l,scaleX:u,scaleY:d}}var Wi=/\.\d*(?:0|9){12}\d*$/;function _e(m){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Wi.test(m)?Math.round(m*l)/l:m}function $t(m){var l=m.aspectRatio,u=m.height,d=m.width,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",w=re(d),N=re(u);if(w&&N){var O=u*l;(b==="contain"||b==="none")&&O>d||b==="cover"&&O<d?u=d/l:d=u*l}else w?u=d/l:N&&(d=u*l);return{width:d,height:u}}function Xi(m){for(var l=ge(new Uint8Array(m)),u=l.length,d=[],b=0;b+3<u;){var w=l[b],N=l[b+1];if(w===255&&N===218)break;if(w===255&&N===216)b+=2;else{var O=l[b+2]*256+l[b+3],D=b+O+2,x=l.slice(b,D);d.push(x),b=D}}return d.reduce(function(B,L){return L[0]===255&&L[1]===225?B.concat(L):B},[])}function _i(m,l){var u=ge(new Uint8Array(m));if(u[2]!==255||u[3]!==224)return m;var d=u[4]*256+u[5],b=[255,216].concat(l,u.slice(4+d));return new Uint8Array(b)}var Yi=Ct.ArrayBuffer,de=Ct.FileReader,It=Ct.URL||Ct.webkitURL,ji=/\.\w+$/,Fi=Ct.Compressor,Gi=function(){function m(l,u){Ci(this,m),this.file=l,this.exif=[],this.image=new Image,this.options=ie(ie({},We),u),this.aborted=!1,this.result=null,this.init()}return Ai(m,[{key:"init",value:function(){var u=this,d=this.file,b=this.options;if(!Bi(d)){this.fail(new Error("The first argument must be a File or Blob object."));return}var w=d.type;if(!pe(w)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!It||!de){this.fail(new Error("The current browser does not support image compression."));return}Yi||(b.checkOrientation=!1,b.retainExif=!1);var N=w==="image/jpeg",O=N&&b.checkOrientation,D=N&&b.retainExif;if(It&&!O&&!D)this.load({url:It.createObjectURL(d)});else{var x=new de;this.reader=x,x.onload=function(B){var L=B.target,V=L.result,P={},y=1;O&&(y=Hi(V),y>1&&ae(P,zi(y))),D&&(u.exif=Xi(V)),O||D?!It||y>1?P.url=Xe(V,w):P.url=It.createObjectURL(d):P.url=V,u.load(P)},x.onabort=function(){u.fail(new Error("Aborted to read the image with FileReader."))},x.onerror=function(){u.fail(new Error("Failed to read the image with FileReader."))},x.onloadend=function(){u.reader=null},O||D?x.readAsArrayBuffer(d):x.readAsDataURL(d)}}},{key:"load",value:function(u){var d=this,b=this.file,w=this.image;w.onload=function(){d.draw(ie(ie({},u),{},{naturalWidth:w.naturalWidth,naturalHeight:w.naturalHeight}))},w.onabort=function(){d.fail(new Error("Aborted to load the image."))},w.onerror=function(){d.fail(new Error("Failed to load the image."))},Ct.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ct.navigator.userAgent)&&(w.crossOrigin="anonymous"),w.alt=b.name,w.src=u.url}},{key:"draw",value:function(u){var d=this,b=u.naturalWidth,w=u.naturalHeight,N=u.rotate,O=N===void 0?0:N,D=u.scaleX,x=D===void 0?1:D,B=u.scaleY,L=B===void 0?1:B,V=this.file,P=this.image,y=this.options,G=document.createElement("canvas"),k=G.getContext("2d"),tt=Math.abs(O)%180===90,$=(y.resize==="contain"||y.resize==="cover")&&re(y.width)&&re(y.height),st=Math.max(y.maxWidth,0)||1/0,ht=Math.max(y.maxHeight,0)||1/0,C=Math.max(y.minWidth,0)||0,ct=Math.max(y.minHeight,0)||0,lt=b/w,z=y.width,W=y.height;if(tt){var at=[ht,st];st=at[0],ht=at[1];var rt=[ct,C];C=rt[0],ct=rt[1];var ft=[W,z];z=ft[0],W=ft[1]}$&&(lt=z/W);var et=$t({aspectRatio:lt,width:st,height:ht},"contain");st=et.width,ht=et.height;var pt=$t({aspectRatio:lt,width:C,height:ct},"cover");if(C=pt.width,ct=pt.height,$){var gt=$t({aspectRatio:lt,width:z,height:W},y.resize);z=gt.width,W=gt.height}else{var vt=$t({aspectRatio:lt,width:z,height:W}),mt=vt.width;z=mt===void 0?b:mt;var Lt=vt.height;W=Lt===void 0?w:Lt}z=Math.floor(_e(Math.min(Math.max(z,C),st))),W=Math.floor(_e(Math.min(Math.max(W,ct),ht)));var qt=-z/2,F=-W/2,Kt=z,ne=W,bt=[];if($){var Pt=0,wt=0,yt=b,At=w,jt=$t({aspectRatio:lt,width:b,height:w},{contain:"cover",cover:"contain"}[y.resize]);yt=jt.width,At=jt.height,Pt=(b-yt)/2,wt=(w-At)/2,bt.push(Pt,wt,yt,At)}if(bt.push(qt,F,Kt,ne),tt){var Ft=[W,z];z=Ft[0],W=Ft[1]}G.width=z,G.height=W,pe(y.mimeType)||(y.mimeType=V.type);var kt="transparent";V.size>y.convertSize&&y.convertTypes.indexOf(y.mimeType)>=0&&(y.mimeType="image/jpeg");var Ut=y.mimeType==="image/jpeg";if(Ut&&(kt="#fff"),k.fillStyle=kt,k.fillRect(0,0,z,W),y.beforeDraw&&y.beforeDraw.call(this,k,G),!this.aborted&&(k.save(),k.translate(z/2,W/2),k.rotate(O*Math.PI/180),k.scale(x,L),k.drawImage.apply(k,[P].concat(bt)),k.restore(),y.drew&&y.drew.call(this,k,G),!this.aborted)){var Ht=function(xt){if(!d.aborted){var Zt=function(Et){return d.done({naturalWidth:b,naturalHeight:w,result:Et})};if(xt&&Ut&&y.retainExif&&d.exif&&d.exif.length>0){var Jt=function(Et){return Zt(ze(Xe(_i(Et,d.exif),y.mimeType)))};if(xt.arrayBuffer)xt.arrayBuffer().then(Jt).catch(function(){d.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Dt=new de;d.reader=Dt,Dt.onload=function(zt){var Et=zt.target;Jt(Et.result)},Dt.onabort=function(){d.fail(new Error("Aborted to read the compressed image with FileReader."))},Dt.onerror=function(){d.fail(new Error("Failed to read the compressed image with FileReader."))},Dt.onloadend=function(){d.reader=null},Dt.readAsArrayBuffer(xt)}}else Zt(xt)}};G.toBlob?G.toBlob(Ht,y.mimeType,y.quality):Ht(ze(G.toDataURL(y.mimeType,y.quality)))}}},{key:"done",value:function(u){var d=u.naturalWidth,b=u.naturalHeight,w=u.result,N=this.file,O=this.image,D=this.options;if(It&&O.src.indexOf("blob:")===0&&It.revokeObjectURL(O.src),w)if(D.strict&&!D.retainExif&&w.size>N.size&&D.mimeType===N.type&&!(D.width>d||D.height>b||D.minWidth>d||D.minHeight>b||D.maxWidth<d||D.maxHeight<b))w=N;else{var x=new Date;w.lastModified=x.getTime(),w.lastModifiedDate=x,w.name=N.name,w.name&&w.type!==N.type&&(w.name=w.name.replace(ji,Pi(w.type)))}else w=N;this.result=w,D.success&&D.success.call(this,w)}},{key:"fail",value:function(u){var d=this.options;if(d.error)d.error.call(this,u);else throw u}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Fi,m}},{key:"setDefaults",value:function(u){ae(We,u)}}]),m}(),Ve={exports:{}};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */(function(m,l){(function(u,d){m.exports=d()})(Oi,function(){function u(a,t){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);t&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,e)}return i}function d(a){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(e){D(a,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function b(a){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(a)}function w(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function N(a,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,k(e.key),e)}}function O(a,t,i){return t&&N(a.prototype,t),i&&N(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a}function D(a,t,i){return t=k(t),t in a?Object.defineProperty(a,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[t]=i,a}function x(a){return B(a)||L(a)||V(a)||y()}function B(a){if(Array.isArray(a))return P(a)}function L(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function V(a,t){if(a){if(typeof a=="string")return P(a,t);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(a,t)}}function P(a,t){(t==null||t>a.length)&&(t=a.length);for(var i=0,e=new Array(t);i<t;i++)e[i]=a[i];return e}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(a,t){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var e=i.call(a,t||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function k(a){var t=G(a,"string");return typeof t=="symbol"?t:String(t)}var tt=typeof window<"u"&&typeof window.document<"u",$=tt?window:{},st=tt&&$.document.documentElement?"ontouchstart"in $.document.documentElement:!1,ht=tt?"PointerEvent"in $:!1,C="cropper",ct="all",lt="crop",z="move",W="zoom",at="e",rt="w",ft="s",et="n",pt="ne",gt="nw",vt="se",mt="sw",Lt="".concat(C,"-crop"),qt="".concat(C,"-disabled"),F="".concat(C,"-hidden"),Kt="".concat(C,"-hide"),ne="".concat(C,"-invisible"),bt="".concat(C,"-modal"),Pt="".concat(C,"-move"),wt="".concat(C,"Action"),yt="".concat(C,"Preview"),At="crop",jt="move",Ft="none",kt="crop",Ut="cropend",Ht="cropmove",Qt="cropstart",xt="dblclick",Zt=st?"touchstart":"mousedown",Jt=st?"touchmove":"mousemove",Dt=st?"touchend touchcancel":"mouseup",zt=ht?"pointerdown":Zt,Et=ht?"pointermove":Jt,ve=ht?"pointerup pointercancel":Dt,me="ready",be="resize",we="wheel",oe="zoom",ye="image/jpeg",Ge=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,$e=/^data:/,qe=/^data:image\/jpeg;base64,/,Ke=/^img|canvas$/i,xe=200,De=100,Ee={viewMode:0,dragMode:At,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:xe,minContainerHeight:De,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Qe='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ze=Number.isNaN||$.isNaN;function E(a){return typeof a=="number"&&!Ze(a)}var Me=function(t){return t>0&&t<1/0};function se(a){return typeof a>"u"}function Rt(a){return b(a)==="object"&&a!==null}var Je=Object.prototype.hasOwnProperty;function Wt(a){if(!Rt(a))return!1;try{var t=a.constructor,i=t.prototype;return t&&i&&Je.call(i,"isPrototypeOf")}catch{return!1}}function q(a){return typeof a=="function"}var ti=Array.prototype.slice;function Te(a){return Array.from?Array.from(a):ti.call(a)}function U(a,t){return a&&q(t)&&(Array.isArray(a)||E(a.length)?Te(a).forEach(function(i,e){t.call(a,i,e,a)}):Rt(a)&&Object.keys(a).forEach(function(i){t.call(a,a[i],i,a)})),a}var S=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),o=1;o<i;o++)e[o-1]=arguments[o];return Rt(t)&&e.length>0&&e.forEach(function(r){Rt(r)&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t},ei=/\.\d*(?:0|9){12}\d*$/;function Xt(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ei.test(a)?Math.round(a*t)/t:a}var ii=/^width|height|left|top|marginLeft|marginTop$/;function Mt(a,t){var i=a.style;U(t,function(e,o){ii.test(o)&&E(e)&&(e="".concat(e,"px")),i[o]=e})}function ai(a,t){return a.classList?a.classList.contains(t):a.className.indexOf(t)>-1}function Y(a,t){if(t){if(E(a.length)){U(a,function(e){Y(e,t)});return}if(a.classList){a.classList.add(t);return}var i=a.className.trim();i?i.indexOf(t)<0&&(a.className="".concat(i," ").concat(t)):a.className=t}}function nt(a,t){if(t){if(E(a.length)){U(a,function(i){nt(i,t)});return}if(a.classList){a.classList.remove(t);return}a.className.indexOf(t)>=0&&(a.className=a.className.replace(t,""))}}function _t(a,t,i){if(t){if(E(a.length)){U(a,function(e){_t(e,t,i)});return}i?Y(a,t):nt(a,t)}}var ri=/([a-z\d])([A-Z])/g;function he(a){return a.replace(ri,"$1-$2").toLowerCase()}function ce(a,t){return Rt(a[t])?a[t]:a.dataset?a.dataset[t]:a.getAttribute("data-".concat(he(t)))}function Vt(a,t,i){Rt(i)?a[t]=i:a.dataset?a.dataset[t]=i:a.setAttribute("data-".concat(he(t)),i)}function ni(a,t){if(Rt(a[t]))try{delete a[t]}catch{a[t]=void 0}else if(a.dataset)try{delete a.dataset[t]}catch{a.dataset[t]=void 0}else a.removeAttribute("data-".concat(he(t)))}var Oe=/\s\s*/,Ce=function(){var a=!1;if(tt){var t=!1,i=function(){},e=Object.defineProperty({},"once",{get:function(){return a=!0,t},set:function(r){t=r}});$.addEventListener("test",i,e),$.removeEventListener("test",i,e)}return a}();function it(a,t,i){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=i;t.trim().split(Oe).forEach(function(r){if(!Ce){var n=a.listeners;n&&n[r]&&n[r][i]&&(o=n[r][i],delete n[r][i],Object.keys(n[r]).length===0&&delete n[r],Object.keys(n).length===0&&delete a.listeners)}a.removeEventListener(r,o,e)})}function Z(a,t,i){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=i;t.trim().split(Oe).forEach(function(r){if(e.once&&!Ce){var n=a.listeners,s=n===void 0?{}:n;o=function(){delete s[r][i],a.removeEventListener(r,o,e);for(var f=arguments.length,h=new Array(f),c=0;c<f;c++)h[c]=arguments[c];i.apply(a,h)},s[r]||(s[r]={}),s[r][i]&&a.removeEventListener(r,s[r][i],e),s[r][i]=o,a.listeners=s}a.addEventListener(r,o,e)})}function Yt(a,t,i){var e;return q(Event)&&q(CustomEvent)?e=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,i)),a.dispatchEvent(e)}function Ae(a){var t=a.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var le=$.location,oi=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Re(a){var t=a.match(oi);return t!==null&&(t[1]!==le.protocol||t[2]!==le.hostname||t[3]!==le.port)}function Ne(a){var t="timestamp=".concat(new Date().getTime());return a+(a.indexOf("?")===-1?"?":"&")+t}function Gt(a){var t=a.rotate,i=a.scaleX,e=a.scaleY,o=a.translateX,r=a.translateY,n=[];E(o)&&o!==0&&n.push("translateX(".concat(o,"px)")),E(r)&&r!==0&&n.push("translateY(".concat(r,"px)")),E(t)&&t!==0&&n.push("rotate(".concat(t,"deg)")),E(i)&&i!==1&&n.push("scaleX(".concat(i,")")),E(e)&&e!==1&&n.push("scaleY(".concat(e,")"));var s=n.length?n.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function si(a){var t=d({},a),i=0;return U(a,function(e,o){delete t[o],U(t,function(r){var n=Math.abs(e.startX-r.startX),s=Math.abs(e.startY-r.startY),g=Math.abs(e.endX-r.endX),f=Math.abs(e.endY-r.endY),h=Math.sqrt(n*n+s*s),c=Math.sqrt(g*g+f*f),p=(c-h)/h;Math.abs(p)>Math.abs(i)&&(i=p)})}),i}function te(a,t){var i=a.pageX,e=a.pageY,o={endX:i,endY:e};return t?o:d({startX:i,startY:e},o)}function hi(a){var t=0,i=0,e=0;return U(a,function(o){var r=o.startX,n=o.startY;t+=r,i+=n,e+=1}),t/=e,i/=e,{pageX:t,pageY:i}}function Tt(a){var t=a.aspectRatio,i=a.height,e=a.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Me(e),n=Me(i);if(r&&n){var s=i*t;o==="contain"&&s>e||o==="cover"&&s<e?i=e/t:e=i*t}else r?i=e/t:n&&(e=i*t);return{width:e,height:i}}function ci(a){var t=a.width,i=a.height,e=a.degree;if(e=Math.abs(e)%180,e===90)return{width:i,height:t};var o=e%90*Math.PI/180,r=Math.sin(o),n=Math.cos(o),s=t*n+i*r,g=t*r+i*n;return e>90?{width:g,height:s}:{width:s,height:g}}function li(a,t,i,e){var o=t.aspectRatio,r=t.naturalWidth,n=t.naturalHeight,s=t.rotate,g=s===void 0?0:s,f=t.scaleX,h=f===void 0?1:f,c=t.scaleY,p=c===void 0?1:c,T=i.aspectRatio,M=i.naturalWidth,I=i.naturalHeight,A=e.fillColor,X=A===void 0?"transparent":A,j=e.imageSmoothingEnabled,H=j===void 0?!0:j,ut=e.imageSmoothingQuality,Q=ut===void 0?"low":ut,v=e.maxWidth,R=v===void 0?1/0:v,_=e.maxHeight,J=_===void 0?1/0:_,dt=e.minWidth,Nt=dt===void 0?0:dt,Bt=e.minHeight,Ot=Bt===void 0?0:Bt,ot=document.createElement("canvas"),K=ot.getContext("2d"),St=Tt({aspectRatio:T,width:R,height:J}),ee=Tt({aspectRatio:T,width:Nt,height:Ot},"cover"),fe=Math.min(St.width,Math.max(ee.width,M)),ue=Math.min(St.height,Math.max(ee.height,I)),Ie=Tt({aspectRatio:o,width:R,height:J}),Le=Tt({aspectRatio:o,width:Nt,height:Ot},"cover"),Pe=Math.min(Ie.width,Math.max(Le.width,r)),ke=Math.min(Ie.height,Math.max(Le.height,n)),Mi=[-Pe/2,-ke/2,Pe,ke];return ot.width=Xt(fe),ot.height=Xt(ue),K.fillStyle=X,K.fillRect(0,0,fe,ue),K.save(),K.translate(fe/2,ue/2),K.rotate(g*Math.PI/180),K.scale(h,p),K.imageSmoothingEnabled=H,K.imageSmoothingQuality=Q,K.drawImage.apply(K,[a].concat(x(Mi.map(function(Ti){return Math.floor(Xt(Ti))})))),K.restore(),ot}var Be=String.fromCharCode;function fi(a,t,i){var e="";i+=t;for(var o=t;o<i;o+=1)e+=Be(a.getUint8(o));return e}var ui=/^data:.*,/;function di(a){var t=a.replace(ui,""),i=atob(t),e=new ArrayBuffer(i.length),o=new Uint8Array(e);return U(o,function(r,n){o[n]=i.charCodeAt(n)}),e}function pi(a,t){for(var i=[],e=8192,o=new Uint8Array(a);o.length>0;)i.push(Be.apply(null,Te(o.subarray(0,e)))),o=o.subarray(e);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function gi(a){var t=new DataView(a),i;try{var e,o,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var n=t.byteLength,s=2;s+1<n;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){o=s;break}s+=1}if(o){var g=o+4,f=o+10;if(fi(t,g,4)==="Exif"){var h=t.getUint16(f);if(e=h===18761,(e||h===19789)&&t.getUint16(f+2,e)===42){var c=t.getUint32(f+4,e);c>=8&&(r=f+c)}}}if(r){var p=t.getUint16(r,e),T,M;for(M=0;M<p;M+=1)if(T=r+M*12+2,t.getUint16(T,e)===274){T+=8,i=t.getUint16(T,e),t.setUint16(T,1,e);break}}}catch{i=1}return i}function vi(a){var t=0,i=1,e=1;switch(a){case 2:i=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:e}}var mi={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,o=this.cropper,r=Number(i.minContainerWidth),n=Number(i.minContainerHeight);Y(o,F),nt(t,F);var s={width:Math.max(e.offsetWidth,r>=0?r:xe),height:Math.max(e.offsetHeight,n>=0?n:De)};this.containerData=s,Mt(o,{width:s.width,height:s.height}),Y(t,F),nt(o,F)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,o=Math.abs(i.rotate)%180===90,r=o?i.naturalHeight:i.naturalWidth,n=o?i.naturalWidth:i.naturalHeight,s=r/n,g=t.width,f=t.height;t.height*s>t.width?e===3?g=t.height*s:f=t.width/s:e===3?f=t.width/s:g=t.height*s;var h={aspectRatio:s,naturalWidth:r,naturalHeight:n,width:g,height:f};this.canvasData=h,this.limited=e===1||e===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(t.width-h.width)/2,h.top=(t.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=S({},h)},limitCanvas:function(t,i){var e=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,s=e.viewMode,g=r.aspectRatio,f=this.cropped&&n;if(t){var h=Number(e.minCanvasWidth)||0,c=Number(e.minCanvasHeight)||0;s>1?(h=Math.max(h,o.width),c=Math.max(c,o.height),s===3&&(c*g>h?h=c*g:c=h/g)):s>0&&(h?h=Math.max(h,f?n.width:0):c?c=Math.max(c,f?n.height:0):f&&(h=n.width,c=n.height,c*g>h?h=c*g:c=h/g));var p=Tt({aspectRatio:g,width:h,height:c});h=p.width,c=p.height,r.minWidth=h,r.minHeight=c,r.maxWidth=1/0,r.maxHeight=1/0}if(i)if(s>(f?0:1)){var T=o.width-r.width,M=o.height-r.height;r.minLeft=Math.min(0,T),r.minTop=Math.min(0,M),r.maxLeft=Math.max(0,T),r.maxTop=Math.max(0,M),f&&this.limited&&(r.minLeft=Math.min(n.left,n.left+(n.width-r.width)),r.minTop=Math.min(n.top,n.top+(n.height-r.height)),r.maxLeft=n.left,r.maxTop=n.top,s===2&&(r.width>=o.width&&(r.minLeft=Math.min(0,T),r.maxLeft=Math.max(0,T)),r.height>=o.height&&(r.minTop=Math.min(0,M),r.maxTop=Math.max(0,M))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(t,i){var e=this.canvasData,o=this.imageData;if(i){var r=ci({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),n=r.width,s=r.height,g=e.width*(n/e.naturalWidth),f=e.height*(s/e.naturalHeight);e.left-=(g-e.width)/2,e.top-=(f-e.height)/2,e.width=g,e.height=f,e.aspectRatio=n/s,e.naturalWidth=n,e.naturalHeight=s,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,Mt(this.canvas,S({width:e.width,height:e.height},Gt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,o=e.naturalWidth*(i.width/i.naturalWidth),r=e.naturalHeight*(i.height/i.naturalHeight);S(e,{width:o,height:r,left:(i.width-o)/2,top:(i.height-r)/2}),Mt(this.image,S({width:e.width,height:e.height},Gt(S({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,r={width:i.width,height:i.height};e&&(i.height*e>i.width?r.height=r.width/e:r.width=r.height*e),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=i.left+(i.width-r.width)/2,r.top=i.top+(i.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=S({},r)},limitCropBox:function(t,i){var e=this.options,o=this.containerData,r=this.canvasData,n=this.cropBoxData,s=this.limited,g=e.aspectRatio;if(t){var f=Number(e.minCropBoxWidth)||0,h=Number(e.minCropBoxHeight)||0,c=s?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,p=s?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;f=Math.min(f,o.width),h=Math.min(h,o.height),g&&(f&&h?h*g>f?h=f/g:f=h*g:f?h=f/g:h&&(f=h*g),p*g>c?p=c/g:c=p*g),n.minWidth=Math.min(f,c),n.minHeight=Math.min(h,p),n.maxWidth=c,n.maxHeight=p}i&&(s?(n.minLeft=Math.max(0,r.left),n.minTop=Math.max(0,r.top),n.maxLeft=Math.min(o.width,r.left+r.width)-n.width,n.maxTop=Math.min(o.height,r.top+r.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=o.width-n.width,n.maxTop=o.height-n.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Vt(this.face,wt,e.width>=i.width&&e.height>=i.height?z:ct),Mt(this.cropBox,S({width:e.width,height:e.height},Gt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Yt(this.element,kt,this.getData())}},bi={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,o=i?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",n=document.createElement("img");if(i&&(n.crossOrigin=i),n.src=o,n.alt=r,this.viewBox.appendChild(n),this.viewBoxImage=n,!!e){var s=e;typeof e=="string"?s=t.ownerDocument.querySelectorAll(e):e.querySelector&&(s=[e]),this.previews=s,U(s,function(g){var f=document.createElement("img");Vt(g,yt,{width:g.offsetWidth,height:g.offsetHeight,html:g.innerHTML}),i&&(f.crossOrigin=i),f.src=o,f.alt=r,f.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',g.innerHTML="",g.appendChild(f)})}},resetPreview:function(){U(this.previews,function(t){var i=ce(t,yt);Mt(t,{width:i.width,height:i.height}),t.innerHTML=i.html,ni(t,yt)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,o=e.width,r=e.height,n=t.width,s=t.height,g=e.left-i.left-t.left,f=e.top-i.top-t.top;!this.cropped||this.disabled||(Mt(this.viewBoxImage,S({width:n,height:s},Gt(S({translateX:-g,translateY:-f},t)))),U(this.previews,function(h){var c=ce(h,yt),p=c.width,T=c.height,M=p,I=T,A=1;o&&(A=p/o,I=r*A),r&&I>T&&(A=T/r,M=o*A,I=T),Mt(h,{width:M,height:I}),Mt(h.getElementsByTagName("img")[0],S({width:n*A,height:s*A},Gt(S({translateX:-g*A,translateY:-f*A},t))))}))}},wi={bind:function(){var t=this.element,i=this.options,e=this.cropper;q(i.cropstart)&&Z(t,Qt,i.cropstart),q(i.cropmove)&&Z(t,Ht,i.cropmove),q(i.cropend)&&Z(t,Ut,i.cropend),q(i.crop)&&Z(t,kt,i.crop),q(i.zoom)&&Z(t,oe,i.zoom),Z(e,zt,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&Z(e,we,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Z(e,xt,this.onDblclick=this.dblclick.bind(this)),Z(t.ownerDocument,Et,this.onCropMove=this.cropMove.bind(this)),Z(t.ownerDocument,ve,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&Z(window,be,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;q(i.cropstart)&&it(t,Qt,i.cropstart),q(i.cropmove)&&it(t,Ht,i.cropmove),q(i.cropend)&&it(t,Ut,i.cropend),q(i.crop)&&it(t,kt,i.crop),q(i.zoom)&&it(t,oe,i.zoom),it(e,zt,this.onCropStart),i.zoomable&&i.zoomOnWheel&&it(e,we,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&it(e,xt,this.onDblclick),it(t.ownerDocument,Et,this.onCropMove),it(t.ownerDocument,ve,this.onCropEnd),i.responsive&&it(window,be,this.onResize)}},yi={resize:function(){if(!this.disabled){var t=this.options,i=this.container,e=this.containerData,o=i.offsetWidth/e.width,r=i.offsetHeight/e.height,n=Math.abs(o-1)>Math.abs(r-1)?o:r;if(n!==1){var s,g;t.restore&&(s=this.getCanvasData(),g=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(U(s,function(f,h){s[h]=f*n})),this.setCropBoxData(U(g,function(f,h){g[h]=f*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ft||this.setDragMode(ai(this.dragBox,Lt)?jt:At)},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(E(i)&&i!==1||E(e)&&e!==0||t.ctrlKey))){var o=this.options,r=this.pointers,n;t.changedTouches?U(t.changedTouches,function(s){r[s.identifier]=te(s)}):r[t.pointerId||0]=te(t),Object.keys(r).length>1&&o.zoomable&&o.zoomOnTouch?n=W:n=ce(t.target,wt),Ge.test(n)&&Yt(this.element,Qt,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===lt&&(this.cropping=!0,Y(this.dragBox,bt)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var e=this.pointers;t.preventDefault(),Yt(this.element,Ht,{originalEvent:t,action:i})!==!1&&(t.changedTouches?U(t.changedTouches,function(o){S(e[o.identifier]||{},te(o,!0))}):S(e[t.pointerId||0]||{},te(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?U(t.changedTouches,function(o){delete e[o.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,_t(this.dragBox,bt,this.cropped&&this.options.modal)),Yt(this.element,Ut,{originalEvent:t,action:i}))}}},xi={change:function(t){var i=this.options,e=this.canvasData,o=this.containerData,r=this.cropBoxData,n=this.pointers,s=this.action,g=i.aspectRatio,f=r.left,h=r.top,c=r.width,p=r.height,T=f+c,M=h+p,I=0,A=0,X=o.width,j=o.height,H=!0,ut;!g&&t.shiftKey&&(g=c&&p?c/p:1),this.limited&&(I=r.minLeft,A=r.minTop,X=I+Math.min(o.width,e.width,e.left+e.width),j=A+Math.min(o.height,e.height,e.top+e.height));var Q=n[Object.keys(n)[0]],v={x:Q.endX-Q.startX,y:Q.endY-Q.startY},R=function(J){switch(J){case at:T+v.x>X&&(v.x=X-T);break;case rt:f+v.x<I&&(v.x=I-f);break;case et:h+v.y<A&&(v.y=A-h);break;case ft:M+v.y>j&&(v.y=j-M);break}};switch(s){case ct:f+=v.x,h+=v.y;break;case at:if(v.x>=0&&(T>=X||g&&(h<=A||M>=j))){H=!1;break}R(at),c+=v.x,c<0&&(s=rt,c=-c,f-=c),g&&(p=c/g,h+=(r.height-p)/2);break;case et:if(v.y<=0&&(h<=A||g&&(f<=I||T>=X))){H=!1;break}R(et),p-=v.y,h+=v.y,p<0&&(s=ft,p=-p,h-=p),g&&(c=p*g,f+=(r.width-c)/2);break;case rt:if(v.x<=0&&(f<=I||g&&(h<=A||M>=j))){H=!1;break}R(rt),c-=v.x,f+=v.x,c<0&&(s=at,c=-c,f-=c),g&&(p=c/g,h+=(r.height-p)/2);break;case ft:if(v.y>=0&&(M>=j||g&&(f<=I||T>=X))){H=!1;break}R(ft),p+=v.y,p<0&&(s=et,p=-p,h-=p),g&&(c=p*g,f+=(r.width-c)/2);break;case pt:if(g){if(v.y<=0&&(h<=A||T>=X)){H=!1;break}R(et),p-=v.y,h+=v.y,c=p*g}else R(et),R(at),v.x>=0?T<X?c+=v.x:v.y<=0&&h<=A&&(H=!1):c+=v.x,v.y<=0?h>A&&(p-=v.y,h+=v.y):(p-=v.y,h+=v.y);c<0&&p<0?(s=mt,p=-p,c=-c,h-=p,f-=c):c<0?(s=gt,c=-c,f-=c):p<0&&(s=vt,p=-p,h-=p);break;case gt:if(g){if(v.y<=0&&(h<=A||f<=I)){H=!1;break}R(et),p-=v.y,h+=v.y,c=p*g,f+=r.width-c}else R(et),R(rt),v.x<=0?f>I?(c-=v.x,f+=v.x):v.y<=0&&h<=A&&(H=!1):(c-=v.x,f+=v.x),v.y<=0?h>A&&(p-=v.y,h+=v.y):(p-=v.y,h+=v.y);c<0&&p<0?(s=vt,p=-p,c=-c,h-=p,f-=c):c<0?(s=pt,c=-c,f-=c):p<0&&(s=mt,p=-p,h-=p);break;case mt:if(g){if(v.x<=0&&(f<=I||M>=j)){H=!1;break}R(rt),c-=v.x,f+=v.x,p=c/g}else R(ft),R(rt),v.x<=0?f>I?(c-=v.x,f+=v.x):v.y>=0&&M>=j&&(H=!1):(c-=v.x,f+=v.x),v.y>=0?M<j&&(p+=v.y):p+=v.y;c<0&&p<0?(s=pt,p=-p,c=-c,h-=p,f-=c):c<0?(s=vt,c=-c,f-=c):p<0&&(s=gt,p=-p,h-=p);break;case vt:if(g){if(v.x>=0&&(T>=X||M>=j)){H=!1;break}R(at),c+=v.x,p=c/g}else R(ft),R(at),v.x>=0?T<X?c+=v.x:v.y>=0&&M>=j&&(H=!1):c+=v.x,v.y>=0?M<j&&(p+=v.y):p+=v.y;c<0&&p<0?(s=gt,p=-p,c=-c,h-=p,f-=c):c<0?(s=mt,c=-c,f-=c):p<0&&(s=pt,p=-p,h-=p);break;case z:this.move(v.x,v.y),H=!1;break;case W:this.zoom(si(n),t),H=!1;break;case lt:if(!v.x||!v.y){H=!1;break}ut=Ae(this.cropper),f=Q.startX-ut.left,h=Q.startY-ut.top,c=r.minWidth,p=r.minHeight,v.x>0?s=v.y>0?vt:pt:v.x<0&&(f-=c,s=v.y>0?mt:gt),v.y<0&&(h-=p),this.cropped||(nt(this.cropBox,F),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}H&&(r.width=c,r.height=p,r.left=f,r.top=h,this.action=s,this.renderCropBox()),U(n,function(_){_.startX=_.endX,_.startY=_.endY})}},Di={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Y(this.dragBox,bt),nt(this.cropBox,F),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=S({},this.initialImageData),this.canvasData=S({},this.initialCanvasData),this.cropBoxData=S({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(S(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),nt(this.dragBox,bt),Y(this.cropBox,F)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,U(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,nt(this.cropper,qt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Y(this.cropper,qt)),this},destroy:function(){var t=this.element;return t[C]?(t[C]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,o=e.left,r=e.top;return this.moveTo(se(t)?t:o+Number(t),se(i)?i:r+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,o=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(E(t)&&(e.left=t,o=!0),E(i)&&(e.top=i,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var o=this.options,r=this.canvasData,n=r.width,s=r.height,g=r.naturalWidth,f=r.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&o.zoomable){var h=g*t,c=f*t;if(Yt(this.element,oe,{ratio:t,oldRatio:n/g,originalEvent:e})===!1)return this;if(e){var p=this.pointers,T=Ae(this.cropper),M=p&&Object.keys(p).length?hi(p):{pageX:e.pageX,pageY:e.pageY};r.left-=(h-n)*((M.pageX-T.left-r.left)/n),r.top-=(c-s)*((M.pageY-T.top-r.top)/s)}else Wt(i)&&E(i.x)&&E(i.y)?(r.left-=(h-n)*((i.x-r.left)/n),r.top-=(c-s)*((i.y-r.top)/s)):(r.left-=(h-n)/2,r.top-=(c-s)/2);r.width=h,r.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),E(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,E(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(E(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,o=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(E(t)&&(e.scaleX=t,o=!0),E(i)&&(e.scaleY=i,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,e=this.imageData,o=this.canvasData,r=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var s=e.width/e.naturalWidth;if(U(n,function(h,c){n[c]=h/s}),t){var g=Math.round(n.y+n.height),f=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=f-n.x,n.height=g-n.y}}else n={x:0,y:0,width:0,height:0};return i.rotatable&&(n.rotate=e.rotate||0),i.scalable&&(n.scaleX=e.scaleX||1,n.scaleY=e.scaleY||1),n},setData:function(t){var i=this.options,e=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&Wt(t)){var n=!1;i.rotatable&&E(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,n=!0),i.scalable&&(E(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,n=!0),E(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var s=e.width/e.naturalWidth;E(t.x)&&(r.left=t.x*s+o.left),E(t.y)&&(r.top=t.y*s+o.top),E(t.width)&&(r.width=t.width*s),E(t.height)&&(r.height=t.height*s),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?S({},this.containerData):{}},getImageData:function(){return this.sized?S({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&U(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&Wt(t)&&(E(t.left)&&(i.left=t.left),E(t.top)&&(i.top=t.top),E(t.width)?(i.width=t.width,i.height=t.width/e):E(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,e=this.options.aspectRatio,o,r;return this.ready&&this.cropped&&!this.disabled&&Wt(t)&&(E(t.left)&&(i.left=t.left),E(t.top)&&(i.top=t.top),E(t.width)&&t.width!==i.width&&(o=!0,i.width=t.width),E(t.height)&&t.height!==i.height&&(r=!0,i.height=t.height),e&&(o?i.height=i.width/e:r&&(i.width=i.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=li(this.image,this.imageData,i,t);if(!this.cropped)return e;var o=this.getData(t.rounded),r=o.x,n=o.y,s=o.width,g=o.height,f=e.width/Math.floor(i.naturalWidth);f!==1&&(r*=f,n*=f,s*=f,g*=f);var h=s/g,c=Tt({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Tt({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),T=Tt({aspectRatio:h,width:t.width||(f!==1?e.width:s),height:t.height||(f!==1?e.height:g)}),M=T.width,I=T.height;M=Math.min(c.width,Math.max(p.width,M)),I=Math.min(c.height,Math.max(p.height,I));var A=document.createElement("canvas"),X=A.getContext("2d");A.width=Xt(M),A.height=Xt(I),X.fillStyle=t.fillColor||"transparent",X.fillRect(0,0,M,I);var j=t.imageSmoothingEnabled,H=j===void 0?!0:j,ut=t.imageSmoothingQuality;X.imageSmoothingEnabled=H,ut&&(X.imageSmoothingQuality=ut);var Q=e.width,v=e.height,R=r,_=n,J,dt,Nt,Bt,Ot,ot;R<=-s||R>Q?(R=0,J=0,Nt=0,Ot=0):R<=0?(Nt=-R,R=0,J=Math.min(Q,s+R),Ot=J):R<=Q&&(Nt=0,J=Math.min(s,Q-R),Ot=J),J<=0||_<=-g||_>v?(_=0,dt=0,Bt=0,ot=0):_<=0?(Bt=-_,_=0,dt=Math.min(v,g+_),ot=dt):_<=v&&(Bt=0,dt=Math.min(g,v-_),ot=dt);var K=[R,_,J,dt];if(Ot>0&&ot>0){var St=M/s;K.push(Nt*St,Bt*St,Ot*St,ot*St)}return X.drawImage.apply(X,[e].concat(x(K.map(function(ee){return Math.floor(Xt(ee))})))),A},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!se(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r=t===At,n=i.movable&&t===jt;t=r||n?t:Ft,i.dragMode=t,Vt(e,wt,t),_t(e,Lt,r),_t(e,Pt,n),i.cropBoxMovable||(Vt(o,wt,t),_t(o,Lt,r),_t(o,Pt,n))}return this}},Ei=$.Cropper,Se=function(){function a(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(w(this,a),!t||!Ke.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=S({},Ee,Wt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return O(a,[{key:"init",value:function(){var i=this.element,e=i.tagName.toLowerCase(),o;if(!i[C]){if(i[C]=this,e==="img"){if(this.isImg=!0,o=i.getAttribute("src")||"",this.originalUrl=o,!o)return;o=i.src}else e==="canvas"&&window.HTMLCanvasElement&&(o=i.toDataURL());this.load(o)}}},{key:"load",value:function(i){var e=this;if(i){this.url=i,this.imageData={};var o=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if($e.test(i)){qe.test(i)?this.read(di(i)):this.clone();return}var n=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=s,n.onerror=s,n.ontimeout=s,n.onprogress=function(){n.getResponseHeader("content-type")!==ye&&n.abort()},n.onload=function(){e.read(n.response)},n.onloadend=function(){e.reloading=!1,e.xhr=null},r.checkCrossOrigin&&Re(i)&&o.crossOrigin&&(i=Ne(i)),n.open("GET",i,!0),n.responseType="arraybuffer",n.withCredentials=o.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(i){var e=this.options,o=this.imageData,r=gi(i),n=0,s=1,g=1;if(r>1){this.url=pi(i,ye);var f=vi(r);n=f.rotate,s=f.scaleX,g=f.scaleY}e.rotatable&&(o.rotate=n),e.scalable&&(o.scaleX=s,o.scaleY=g),this.clone()}},{key:"clone",value:function(){var i=this.element,e=this.url,o=i.crossOrigin,r=e;this.options.checkCrossOrigin&&Re(e)&&(o||(o="anonymous"),r=Ne(e)),this.crossOrigin=o,this.crossOriginUrl=r;var n=document.createElement("img");o&&(n.crossOrigin=o),n.src=r||e,n.alt=i.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),Y(n,Kt),i.parentNode.insertBefore(n,i.nextSibling)}},{key:"start",value:function(){var i=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var o=$.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test($.navigator.userAgent),r=function(f,h){S(i.imageData,{naturalWidth:f,naturalHeight:h,aspectRatio:f/h}),i.initialImageData=S({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(e.naturalWidth&&!o){r(e.naturalWidth,e.naturalHeight);return}var n=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){r(n.width,n.height),o||s.removeChild(n)},n.src=e.src,o||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(n))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,e=this.options,o=this.image,r=i.parentNode,n=document.createElement("div");n.innerHTML=Qe;var s=n.querySelector(".".concat(C,"-container")),g=s.querySelector(".".concat(C,"-canvas")),f=s.querySelector(".".concat(C,"-drag-box")),h=s.querySelector(".".concat(C,"-crop-box")),c=h.querySelector(".".concat(C,"-face"));this.container=r,this.cropper=s,this.canvas=g,this.dragBox=f,this.cropBox=h,this.viewBox=s.querySelector(".".concat(C,"-view-box")),this.face=c,g.appendChild(o),Y(i,F),r.insertBefore(s,i.nextSibling),nt(o,Kt),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Y(h,F),e.guides||Y(h.getElementsByClassName("".concat(C,"-dashed")),F),e.center||Y(h.getElementsByClassName("".concat(C,"-center")),F),e.background&&Y(s,"".concat(C,"-bg")),e.highlight||Y(c,ne),e.cropBoxMovable&&(Y(c,Pt),Vt(c,wt,ct)),e.cropBoxResizable||(Y(h.getElementsByClassName("".concat(C,"-line")),F),Y(h.getElementsByClassName("".concat(C,"-point")),F)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),q(e.ready)&&Z(i,me,e.ready,{once:!0}),Yt(i,me)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),nt(this.element,F)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Ei,a}},{key:"setDefaults",value:function(i){S(Ee,Wt(i)&&i)}}]),a}();return S(Se.prototype,mi,bi,wi,yi,xi,Di),Se})})(Ve);var $i=Ve.exports;export{Gi as C,$i as c};
