import{a2 as T,R as V,e as u,t as j,_ as F,j as P,K as R,L as p,Q as s,C as f,F as C,B as E,x as _,H,m as g}from"../../../vendor/vue-utils-cea615f1.js";import{b as K,d as L,e as N}from"../../../vendor/id-959b107e.js";import{_ as $}from"../../resource/IframeModal-a5ec19de.js";import{_ as A}from"../../resource/ModalForm-9c5ae7f7.js";import"../../../vendor/common-utils-e0afba66.js";import"../../../vendor/bootstrap-utils-9ffca17a.js";import"../../../vendor/jquery-utils-4b2e19e3.js";import"../../../vendor/vue-plugins-utils-b3bb03cf.js";import"../../../vendor/images-utils-205332c6.js";import"../../resource/CropperImage-47525332.js";const q=T("product-store",{state:()=>({items:{}}),getters:{getSelectedByUrl:i=>n=>i.items[n]||!1},actions:{setItemByUrl(i,n){this.items[i]=n}}}),M={class:"section-body"},Q={class:"section-title fs-lg"},z={class:"section-lead"},G={class:"row"},J={class:"col-12"},O={class:"d-flex align-items-start flex-wrap flex-sm-nowrap"},W=["src","alt"],X={class:"flex-1 ml-0 ml-sm-3"},Y={class:"action d-flex align-items-center mt-3"},ce={__name:"Detail",props:{slug:{type:[String,null],required:!0}},setup(i){const n=i,k=V(),e=u(null),o=j(n,"slug"),d=q(),{getSelectedByUrl:h}=F(d),m=u(!1),b=u(!1),S=u({}),w=()=>k.push({name:"settings.product"}),y=()=>{h.value(o.value)||K.get(L("backend.product.get",{search:o.value,columns:"url",fetch_first:!0})).then(t=>{var a;return d.setItemByUrl(o.value,(a=t.data)==null?void 0:a.data)}).catch(t=>{var a,r;N.fire({title:"Terjadi Kesalahan",text:((r=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:r.message)||"Data product tidak ditemukan",icon:"error",timer:5e3,timerProgressBar:!0,confirmButtonText:"Kembali"}).then(({isConfirmed:c,dismiss:l})=>{(c||l=="timer")&&w()})}).finally(()=>I()),e.value=h.value(o.value),console.log(e.value)},U=()=>{S.value=e.value,m.value=!0},D=v=>{d.setItemByUrl(o.value,v),y()},I=P(()=>{e.value||y()});return(v,t)=>{var r,c;const a=R("FontAwesomeIcon");return g(),p("div",M,[s("h2",Q,f((r=e.value)==null?void 0:r.product_name),1),s("p",z,f((c=e.value)==null?void 0:c.short_location),1),s("div",G,[s("div",J,[s("div",O,[(g(!0),p(C,null,E(e.value.images,(l,B)=>{var x;return g(),p("div",{key:B,class:"mr-3"},[s("img",{src:(x=e.value)==null?void 0:x.images[B],alt:`Logo ${e.value.product_name}`,width:"150",height:"150",style:{"object-fit":"cover"}},null,8,W)])}),128)),s("div",X,f(e.value.description),1)]),s("div",Y,[s("a",{href:"javascript:void(0)",rel:"noopener noreferrer",class:"btn btn-info btn-icon mr-2",onClick:U},[_(a,{icon:["fas","edit"],class:"mr-1"}),H(" Ubah ")])])])]),_(A,{visible:m.value,"onUpdate:visible":t[0]||(t[0]=l=>m.value=l),"init-data":S.value,"is-edit":"",onSubmit:D},null,8,["visible","init-data"]),_($,{visible:b.value,"onUpdate:visible":t[1]||(t[1]=l=>b.value=l),slug:o.value},null,8,["visible","slug"])])}}};export{ce as default};
