import{e as h,R as D,K as u,L as y,Q as t,x as o,H as x,z as N,a1 as j,G as r,u as V,m as k,C as g,F as H,B as M,y as U}from"../../../vendor/vue-utils-92461978.js";import{a as F,b as w,d as A,g as I,e as v}from"../../../vendor/id-53336ca1.js";import{u as P}from"../../resource/tenant-store-1f8ca21f.js";import{_ as K}from"../../resource/Spinner-5d36ea29.js";import{_ as q}from"../../resource/ModalForm-ddb59466.js";import"../../../vendor/common-utils-a1d3ee46.js";import"../../../vendor/bootstrap-utils-9ffca17a.js";import"../../../vendor/jquery-utils-4b2e19e3.js";import"../../../vendor/vue-plugins-utils-2535b5ea.js";import"../../../vendor/images-utils-205332c6.js";import"../../resource/CropperImage-c8d3b76f.js";const E={class:"section-body"},L=t("h2",{class:"section-title fs-lg"},"Daftar Barang",-1),Q=t("p",{class:"section-lead"}," Daftar barang yang akan ditampilkan pada halaman utama ",-1),R={class:"row"},z={class:"col-12"},G={class:"card border-gray-light"},O={class:"card-body"},Y={class:"action-wrapper d-flex mb-3 flex-wrap align-items-center justify-content-between"},J={class:"left-section"},W={class:"right-section mt-2 mt-md-0"},X={class:"input-group"},Z={class:"input-group-prepend"},ee={class:"input-group-text"},te={class:"text-center"},ae=t("span",null,"Belum ada data",-1),ne={class:"text-center"},se=t("span",null,"Data tidak ditemukan",-1),oe={class:"d-flex align-items-baseline justify-content-center"},le={class:"text-right"},ie={class:"d-flex flex-column"},re={class:"footer-wrapper"},ce={class:"d-flex justify-content-between align-items-center"},ke={__name:"Index",setup(de){const _=h(null),S=D(),B=P(),f=h(!1),a=h({busy:!1,fields:[{key:"action",label:"Aksi",class:"text-center",sortable:!1,thStyle:{width:"35px"}},{key:"rownum",label:"No",thStyle:{width:"35px",textAlign:"center"}},{key:"tenant_name",label:"Nama Tenan",thStyle:{textAlign:"center",width:"20%"}},{key:"product_name",label:"Nama Barang",thStyle:{textAlign:"center",width:"20%"}},{key:"description",label:"Deskripsi",thStyle:{textAlign:"center"}},{key:"minimum_qty",label:"Minimum QTY",thStyle:{textAlign:"center",width:"88px"}},{key:"minimum_unit",label:"Minimum Unit",thStyle:{textAlign:"center",width:"88px"}},{key:"tkdn_value",label:"Nilai TKDN",thStyle:{textAlign:"center",width:"88px"}},{key:"price",label:"Harga",thStyle:{textAlign:"center",width:"88px"}},{key:"condition",label:"Kondisi",thStyle:{textAlign:"center",width:"88px"}}],search:{filter:null,columns:["name","description"]},meta:{page:1,from:1,limit:15,total:0}}),C=F.debounce((l,e)=>{a.value.busy=!0,w.get(A("backend.product.get",{search:a.value.search.filter,columns:a.value.search.columns.join(","),page:l.currentPage,limit:l.perPage})).then(s=>{var i,c,d,p,m;a.value.meta.from=(i=s.data)==null?void 0:i.meta.from,a.value.meta.page=(c=s.data)==null?void 0:c.meta.current_page,a.value.meta.limit=(d=s.data)==null?void 0:d.meta.per_page,a.value.meta.total=(p=s.data)==null?void 0:p.meta.total,e((m=s.data)==null?void 0:m.data)}).catch(()=>e([])).finally(()=>setTimeout(()=>a.value.busy=!1,500))},500),T=l=>{I({title:"Hapus Barang",text:`Apakah Anda yakin untuk menghapus data barang an. ${l.product_name}?`,icon:"question"},()=>w.post(A("backend.product.drop"),{_method:"delete",slug:l.slug}).then(e=>e).catch(e=>{let s=e.response.status,i=e.response.data.message;if([409,417,500].includes(s)){v.showValidationMessage(`${i}`);return}if(s=="422"){const c=e.response.data.errors;i=Object.keys(c).map(d=>Array.isArray(c[d])?c[d].join(", "):c[d]).join(", "),v.showValidationMessage(`${i}`);return}})).then(({value:e,isConfirmed:s,isDismissed:i})=>{if(i)return!1;s&&e&&v.fire({title:"Hapus Barang Berhasil",text:`Barang an ${l.product_name} berhasil dihapus`,icon:"success"}),_.value.refresh()})},$=l=>{B.setItemByUrl(l.slug,l),S.push({name:"settings.product.detail",params:{slug:l.slug}})};return(l,e)=>{const s=u("FontAwesomeIcon"),i=u("b-button"),c=u("b-table"),d=u("b-dropdown-item"),p=u("b-dropdown"),m=u("b-pagination");return k(),y("div",E,[L,Q,t("div",R,[t("div",z,[t("div",G,[t("div",O,[t("div",Y,[t("div",J,[t("button",{class:"btn btn-icon icon-left btn-primary",onClick:e[0]||(e[0]=n=>f.value=!0)},[o(s,{icon:["fas","plus"]}),x(" Tambah ")])]),t("div",W,[t("div",X,[t("div",Z,[t("div",ee,[o(s,{icon:["fas","search"]})])]),N(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.search.filter=n),type:"text",class:"form-control",placeholder:"Pencarian"},null,512),[[j,a.value.search.filter]])])])]),o(c,{ref_key:"refTable",ref:_,"table-class":"custom-bordered dataTable",fields:a.value.fields,items:V(C),filter:a.value.search.filter,"current-page":a.value.meta.page,"per-page":a.value.meta.limit,busy:a.value.busy,"show-empty":"",hover:"",striped:"",responsive:""},{"table-busy":r(()=>[o(K)]),empty:r(()=>[t("div",te,[o(s,{icon:["fas","exclamation-circle"],class:"mr-2"}),ae])]),emptyfiltered:r(()=>[t("div",ne,[o(s,{icon:["fas","exclamation-circle"],class:"mr-2"}),se])]),"cell(action)":r(({item:n})=>[t("div",oe,[o(i,{variant:"link",class:"text-info py-0 px-1 outline-none cursor-pointer",onClick:b=>$(n)},{default:r(()=>[o(s,{icon:["fas","info-circle"]})]),_:2},1032,["onClick"]),o(i,{variant:"link",class:"text-danger py-0 px-1 outline-none cursor-pointer",onClick:b=>T(n)},{default:r(()=>[o(s,{icon:["fas","trash-alt"]})]),_:2},1032,["onClick"])])]),"cell(rownum)":r(({index:n})=>[t("div",le,g(n+1),1)]),"cell(condition)":r(({item:n})=>[t("div",ie,g(n.condition==0?"Baru":"Bekas"),1)]),_:1},8,["fields","items","filter","current-page","per-page","busy"]),t("div",re,[t("div",ce,[o(p,{variant:"light",class:"mr-2 form-control-height-sm perpage",text:a.value.meta.limit.toString()},{default:r(()=>[(k(),y(H,null,M([5,10,15,25,50,100],n=>o(d,{key:n,"link-class":"btn",onClick:U(b=>a.value.meta.limit=n,["prevent"])},{default:r(()=>[x(g(n),1)]),_:2},1032,["onClick"])),64))]),_:1},8,["text"]),o(m,{value:a.value.meta.page,"onUpdate:value":e[2]||(e[2]=n=>a.value.meta.page=n),"total-rows":a.value.meta.total,"per-page":a.value.meta.limit,"aria-controls":"group-table","first-class":"hidden-md-down","last-class":"hidden-md-down",class:"pagination mb-0",onChange:e[3]||(e[3]=n=>a.value.meta.page=n)},null,8,["value","total-rows","per-page"])])])])])])]),o(q,{visible:f.value,"onUpdate:visible":e[4]||(e[4]=n=>f.value=n),onSubmit:e[5]||(e[5]=n=>_.value.refresh())},null,8,["visible"])])}}};export{ke as default};
