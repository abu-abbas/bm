import{e as k,c as U,K as C,m as r,q as A,G as j,Q as l,x as v,u as w,H as I,L as u,F as q,B as x,E as h,C as F,n as H}from"../../vendor/vue-utils-cea615f1.js";import{C as O}from"../../vendor/images-utils-205332c6.js";import{_ as S}from"../../vendor/vue-plugins-utils-b3bb03cf.js";const V={class:"pt-3"},B={class:"mt-4 w-100 text-right"},L={__name:"CropperImage",props:{visible:{type:Boolean,required:!0,default:!1},imageUrl:{type:[String,null],required:!0,default:null},aspecRatio:{type:Number,required:!1,default:()=>1/1},autoCropArea:{type:Number,required:!1,default:.5}},emits:["update:visible","after-cropping"],setup(i,{emit:n}){const c=i,p=Math.random().toString(36).substring(2,9),o=k(null),d=U(()=>c.visible),_=()=>{},b=()=>n("update:visible",!1),y=e=>{e&&new O(e,{success:m})},m=e=>{n("after-cropping",{image:e}),n("update:visible",!1)},t=()=>{o.value.disable(),o.value.getCroppedCanvas().toBlob(e=>y(e))};return(e,a)=>{const s=C("FontAwesomeIcon"),f=C("b-modal");return r(),A(f,{id:w(p),visible:d.value,"onUpdate:visible":a[0]||(a[0]=g=>d.value=g),"hide-header":"","hide-footer":"","no-close-on-esc":"","no-close-on-backdrop":"",onShown:_,onHide:b},{default:j(()=>[l("div",V,[v(w(S),{ref_key:"cropTarget",ref:o,class:"img-fluid",src:c.imageUrl,"aspect-ratio":1,"auto-crop-area":c.autoCropArea},null,8,["src","auto-crop-area"])]),l("div",B,[l("button",{class:"btn btn-primary",onClick:t},[v(s,{icon:["fas","crop-simple"],class:"mr-1"}),I(" Crop Image ")])])]),_:1},8,["id","visible"])}}};const N={class:"uploader-image-wrapper"},R={for:"file-input",class:"border"},T=["accept"],E=["src"],M=["onClick"],$={key:0,class:"fs-nano text-danger"},K={__name:"UploadingImage",props:{accept:{type:Array,required:!1,default:()=>["image/gif","image/jpg","image/jpeg","image/png","image/tiff"]},maxSize:{type:Number,required:!1,default:5},modelValue:{type:[Array,null],required:!0,default:null},urlObject:{type:[Array,null],required:!1,default:null},errorMessage:{type:[String,null],required:!1,default:null}},emits:["update:modelValue","update:urlObject","cropping"],setup(i,{emit:n}){const c=i,p=window.URL||window.webkitURL,o=k([]),d=U(()=>c.accept.join(",")),_=t=>{if(!t.target.files.length)return;Array.from(t.target.files).forEach(a=>{const s={visible:!0,input:p.createObjectURL(a),output:null,name:a.name,mime:a.type,file:null};o.value.push(s)}),H(()=>t.target.value="")},b=({image:t})=>{const e=o.value[o.value.length-1];e.output=p.createObjectURL(t),e.file=new File([t],e.name,{type:e.mime}),m()},y=t=>{o.value.splice(t,1),m()},m=()=>{const t=o.value.map(a=>a.file),e=o.value.map(a=>a.output);n("update:modelValue",t),n("update:urlObject",e),n("cropping",{files:t,urlObjects:e})};return(t,e)=>{const a=C("FontAwesomeIcon");return r(),u("div",N,[l("label",R,[v(a,{icon:["far","image"]}),l("input",{id:"file-input",type:"file",name:"upload",multiple:"",accept:d.value,onChange:_},null,40,T)]),(r(!0),u(q,null,x(o.value,(s,f)=>(r(),u("div",{key:f,class:"preview-wrapper"},[s.output?(r(),u("img",{key:0,src:s.output,class:"image-preview",alt:"Output after crop and resize"},null,8,E)):h("",!0),l("a",{href:"javascript:void(0)",onClick:g=>y(f)},[v(a,{icon:["fas","trash-alt"]})],8,M),s.visible?(r(),A(L,{key:1,visible:s.visible,"onUpdate:visible":g=>s.visible=g,"image-url":s.input,onAfterCropping:b},null,8,["visible","onUpdate:visible","image-url"])):h("",!0)]))),128)),i.errorMessage?(r(),u("div",$,F(i.errorMessage),1)):h("",!0)])}}};export{K as _};
