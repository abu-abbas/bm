import{c as I,e as V,K as j,m as i,q as D,G as r,Q as e,x as n,u as c,U as g,L as x,C as A,E as S,H as O,n as P}from"../../vendor/vue-utils-cea615f1.js";import{F as y,e as R}from"../../vendor/vue-plugins-utils-b3bb03cf.js";import{g as G,e as T,b as J,d as K}from"../../vendor/id-53336ca1.js";import{_ as Q}from"./UploadingImage-82fb08a5.js";const z={class:"px-3 pb-0 mb-0"},W={class:"form-group row"},X=e("label",{for:"nama",class:"col-sm-3 col-form-label"}," Nama ",-1),Y={class:"col-sm-9"},Z={key:0,class:"form-text text-danger fs-nano"},ee={class:"form-group row"},te=e("label",{for:"lokasi",class:"col-sm-3 col-form-label"}," Lokasi Singkat ",-1),se={class:"col-sm-9"},ae=e("span",{class:"form-text text-muted fs-nano"},"Contoh: Jakarta Pusat",-1),oe={key:0,class:"form-text text-danger fs-nano"},ne={class:"form-group row"},le=e("label",{for:"deskripsi",class:"col-sm-3 col-form-label"}," Deskripsi ",-1),ie={class:"col-sm-9"},re={key:0,class:"form-text text-danger fs-nano"},ce={class:"form-group row"},de=e("label",{class:"col-sm-3 col-form-label"}," Logo ",-1),me={class:"col-sm-9"},ue={key:0,class:"preview-wrapper"},_e=["src","alt"],fe={class:"form-group row"},pe={class:"col-sm-9 offset-sm-3"},he={type:"submit",class:"btn btn-primary mr-2"},be=["onClick"],ye={__name:"ModalForm",props:{visible:{type:Boolean,required:!0,default:!1},initData:{type:[Object,null],required:!1,default:()=>{}},isEdit:{type:Boolean,required:!0,default:!1}},emits:["update:visible","submit"],setup(H,{emit:$}){const f=H,N=Math.random().toString(36).substring(2,9),q=I(()=>f.visible),o=I(()=>f.initData),B=V(null),p=V(null),w=V(!1),L=()=>P(()=>{B.value.focus(),o.value&&(p.value.setFieldValue("name",o.value.name),p.value.setFieldValue("short_location",o.value.short_location),p.value.setFieldValue("description",o.value.description),w.value=!0)}),E=()=>$("update:visible",!1),M=()=>w.value=!1,U=(d,{resetForm:h})=>{var _;const a=f.isEdit,C=a?`Apakah Anda yakan untuk mengubah data ${(_=o.value)==null?void 0:_.name} ?`:`Apakah Anda yakin untuk menambahkan ${d.name} sebagai tenant?`,m=a?"put":"post",b=`backend.tenant.${a?"edit":"store"}`;let u=!1;a&&Object.keys(d).forEach(s=>{d[s]!=o.value[s]&&(u=!0)}),!(a&&!u)&&G({title:`${a?"Ubah":"Tambah"} tenant`,text:C,icon:"question"},()=>{var s;return J.post(K(b),{...d,_method:m,slug:a?(s=o.value)==null?void 0:s.slug:null},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>t).catch(t=>{let v=t.response.status,l=t.response.data.message;if([409,417,500].includes(v)){T.showValidationMessage(`${l}`);return}if(v=="422"){const k=t.response.data.errors;l=Object.keys(k).map(F=>Array.isArray(k[F])?k[F].join(", "):k[F]).join(", "),T.showValidationMessage(`${l}`);return}})}).then(({value:s,isConfirmed:t,isDismissed:v})=>{var l;if(v)return!1;t&&s.data.status=="success"&&(T.fire({title:"Tambah tenant",text:s.data.message,icon:"success"}),h(),$("submit",(l=s.data)==null?void 0:l.data),E())})};return(d,h)=>{const a=j("FontAwesomeIcon"),C=j("b-modal");return i(),D(C,{id:c(N),visible:q.value,"onUpdate:visible":h[0]||(h[0]=m=>q.value=m),title:`${f.isEdit?"Ubah":"Tambah"} Tenant`,"hide-footer":"",onShown:L,onHide:E},{default:r(({hide:m})=>[e("div",z,[n(c(R),{ref_key:"formRef",ref:p,onSubmit:U},{default:r(()=>{var b,u,_;return[e("div",W,[X,e("div",Y,[n(c(y),{label:"Nama tenant",name:"name",rules:"required|min:3|max:200"},{default:r(({field:s,errorMessage:t})=>[e("input",g({id:"nama",ref_key:"nameInput",ref:B},s,{type:"text",class:"form-control",placeholder:"Masukkan nama tenant"}),null,16),t?(i(),x("div",Z,A(t),1)):S("",!0)]),_:1})])]),e("div",ee,[te,e("div",se,[n(c(y),{label:"Lokasi singkat",name:"short_location",rules:"max:50"},{default:r(({field:s,errorMessage:t})=>[e("input",g({id:"lokasi"},s,{type:"text",class:"form-control",placeholder:"Masukkan lokasi singkat tenant"}),null,16),ae,t?(i(),x("div",oe,A(t),1)):S("",!0)]),_:1})])]),e("div",ne,[le,e("div",ie,[n(c(y),{label:"Deskripsi",name:"description",rules:"max:2000"},{default:r(({field:s,errorMessage:t})=>[e("textarea",g({id:"deskripsi"},s,{type:"text",class:"form-control custom-scroll",placeholder:"Masukkan deskripsi tentang tenant"}),null,16),t?(i(),x("div",re,A(t),1)):S("",!0)]),_:1})])]),e("div",ce,[de,e("div",me,[w.value?(i(),x("div",ue,[e("img",{src:(u=(b=o.value)==null?void 0:b.logo)==null?void 0:u.thumb,alt:(_=o.value)==null?void 0:_.name,class:"image-preview"},null,8,_e),e("a",{href:"javascript:void(0)",onClick:M},[n(a,{icon:["fas","trash-alt"]})])])):(i(),D(c(y),{key:1,label:"Logo",name:"logo",rules:"required"},{default:r(({field:s,errorMessage:t})=>[n(Q,g(s,{"error-message":t}),null,16,["error-message"])]),_:1}))])]),e("div",fe,[e("div",pe,[e("button",he,[n(a,{icon:["fas","save"],class:"mr-1"}),O(" Simpan ")]),e("button",{type:"reset",class:"btn btn-light",onClick:m}," Batal ",8,be)])])]}),_:2},1536)])]),_:1},8,["id","visible","title"])}}};export{ye as _};
