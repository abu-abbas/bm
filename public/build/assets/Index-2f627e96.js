import{fl as y,fm as b,fq as q,fK as D,r as E,o as n,c as a,fp as e,fo as h,u as s,_ as m,hC as x,fu as g,a as S,fr as M,fs as N,fW as R}from"./vee-validate-i18n.esm-14720df6.js";import{i as F}from"./isMobile-b3e8a064.js";import{y as C,V}from"./vue-multiselect.esm-aaf679ef.js";import{u as P}from"./tenant-store-48d15098.js";import{_ as U}from"./Spinner-e54ce62d.js";import K from"./404-d8dbb04f.js";import"./_plugin-vue_export-helper-c27b6911.js";function W(c){const p=C(),_=P(),{getSelectedByUrl:u}=V(_),t=y(null),r=y(!1),l=y(!1),k=()=>{if(l.value)return;l.value=!0;const i=u.value(c);if(i){t.value=i,r.value=!0,l.value=!1;return}_.fetchTenantByUrl(c).then(()=>{t.value=u.value(c),r.value=!0}).catch(()=>r.value=!1).finally(()=>setTimeout(()=>l.value=!1,500))},v=i=>{p.push({name:"tenant.product",params:{tenantSlug:c,productSlug:i}})};return b(()=>k()),{data:t,found:r,loading:l,onHandleSelectedProduct:v}}const Y={class:"root-wrapper tenant-page-for-mobile-wrapper"},G={class:"page-wrapper"},J={class:"fixed-header"},O={class:"d-flex justify-content-center align-items-center"},Q={class:"align-self-center"},X={class:"searchbar"},Z={class:"searchbar__icon"},ee=["placeholder"],se={class:"header-action-wrapper"},te={key:1,class:"d-flex justify-content-center align-items-center text__header fs-icon-size",href:"javascript:void(0)",onclick:"doLogout.apply(this, arguments)"},ne=e("div",{class:"spacing-wrapper"},null,-1),oe={class:"user-information"},ae={class:"info__wrapper"},ce={class:"d-flex w-100 align-items-center m-2"},re={key:0},le={key:1},ie={key:1,class:"content-wrapper"},de={key:0,class:"inner-content-wrapper"},_e={class:"shop-logo d-block"},ue={class:"intrinsic w-100 h-100"},pe=["src","alt"],fe={class:"shop-name"},he={class:"badge-text"},me={class:"ml-2 text-content"},ve={class:"shop-location-wrapper"},ge={class:"ml-2 text-content"},ye={class:"content-product px-3 mt-4"},ke={class:"row no-gutters"},we={class:"product-wrapper"},xe=["onClick"],Se=["src","alt"],be={class:"card-body p-2 d-flex flex-column"},Ce={class:"product-description fs-sm"},Be={__name:"Index",props:{slug:{type:[String,null],required:!0,default:null}},setup(c){const p=c,_=C(),u=q(()=>p.slug),{data:t,found:r,loading:l,onHandleSelectedProduct:k}=W(u.value),v=y(null),i=()=>{var d;const w=window.scrollY>200?"add":"remove";(d=v.value)==null||d.classList[w]("sticky-top")},z=()=>{if(!m.user){x();return}return _.push({name:"landing.transaction"})};return b(()=>document.addEventListener("scroll",i)),D(()=>document.removeEventListener("scroll",i)),(w,d)=>{var B,T,$,I,L,j,H;const f=E("FontAwesomeIcon");return n(),a("div",Y,[e("div",G,[e("header",J,[e("div",{onClick:d[0]||(d[0]=o=>w.$router.push({name:"landing.home"})),class:"button-wrapper"},[e("div",O,[h(f,{icon:["fas","arrow-left"]})])]),e("div",Q,[e("div",X,[e("div",Z,[h(f,{icon:["fas","search"]})]),e("input",{type:"search",class:"searchbar__input",placeholder:`Cari di ${s(r)?(B=s(t))==null?void 0:B.name:s(m).appname}`},null,8,ee)])]),e("div",se,[e("a",{class:"d-flex justify-content-center align-items-center text__header fs-icon-size",onClick:z},[h(f,{icon:["fas","cart-shopping"]})]),s(m).user?(n(),a("a",te,[h(f,{icon:["fas","arrow-right-from-bracket"]})])):(n(),a("a",{key:0,class:"d-flex justify-content-center align-items-center text__header fs-icon-size",onClick:d[1]||(d[1]=(...o)=>s(x)&&s(x)(...o))},[h(f,{icon:["fas","arrow-right-to-bracket"]})]))])]),ne,e("div",oe,[e("div",ae,[e("div",ce,[s(m).user?(n(),a("span",le,"Halo, "+g(s(m).user.name),1)):(n(),a("span",re,"Anda belum login."))])])])]),s(l)?(n(),S(U,{key:0,class:"mt-5"})):(n(),a("div",ie,[s(r)?(n(),a("div",de,[e("div",{ref_key:"needSticky",ref:v,class:"tenant-information-wrapper"},[e("div",_e,[e("div",ue,[e("img",{src:($=(T=s(t))==null?void 0:T.logo)==null?void 0:$.thumb,alt:(I=s(t))==null?void 0:I.name,class:"tenant-logo"},null,8,pe)])]),e("div",fe,[e("div",he,[e("div",me,g((L=s(t))==null?void 0:L.name),1)]),e("div",ve,[e("div",ge,g((j=s(t))==null?void 0:j.short_location),1)])])],512),e("div",ye,[e("div",ke,[(n(!0),a(M,null,N((H=s(t))==null?void 0:H.products,(o,A)=>(n(),a("div",{key:A,class:"col-6"},[e("div",we,[e("div",{class:"card border shadow-sm rounded-lg",onClick:Te=>s(k)(o.slug)},[e("img",{src:o==null?void 0:o.images[0],alt:o.product_name},null,8,Se),e("div",be,[e("div",Ce,g(o==null?void 0:o.description),1)])],8,xe)])]))),128))])])])):(n(),S(K,{key:1,class:"px-3"}))]))])}}};const ze={__name:"Index",props:{slug:{type:[String,null],required:!0,default:null}},setup(c){const p=c,_=C(),u=R(p,"slug"),t=q(()=>!F(window.navigator).phone||F(window.navigator).tablet);return b(()=>t.value?_.push({name:"landing.home"}):null),(r,l)=>(n(),S(Be,{slug:u.value},null,8,["slug"]))}};export{ze as default};
