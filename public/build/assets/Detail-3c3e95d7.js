import{fl as u,fB as V,hj as I,r as j,c as v,fp as s,fu as p,fr as P,fs as E,fo as _,gT as F,o as g,gW as N,gX as R,gY as $}from"./vee-validate-i18n.esm-b9e812f9.js";import{V as A,y as C,U as H}from"./vue-multiselect.esm-6b6e0179.js";import{_ as K}from"./IframeModal-44add37b.js";import{_ as L}from"./ModalForm-612e21ff.js";import"./CropperImage-c2cb432e.js";const q=A("product-store",{state:()=>({items:{}}),getters:{getSelectedByUrl:i=>n=>i.items[n]||!1},actions:{setItemByUrl(i,n){this.items[i]=n}}}),M={class:"section-body"},W={class:"section-title fs-lg"},X={class:"section-lead"},Y={class:"row"},z={class:"col-12"},G={class:"d-flex align-items-start flex-wrap flex-sm-nowrap"},J=["src","alt"],O={class:"flex-1 ml-0 ml-sm-3"},Q={class:"action d-flex align-items-center mt-3"},oe={__name:"Detail",props:{slug:{type:[String,null],required:!0}},setup(i){const n=i,U=C(),e=u(null),o=V(n,"slug"),d=q(),{getSelectedByUrl:h}=H(d),m=u(!1),b=u(!1),y=u({}),k=()=>U.push({name:"settings.product"}),S=()=>{h.value(o.value)||N.get(R("backend.product.get",{search:o.value,columns:"url",fetch_first:!0})).then(t=>{var a;return d.setItemByUrl(o.value,(a=t.data)==null?void 0:a.data)}).catch(t=>{var a,c;$.fire({title:"Terjadi Kesalahan",text:((c=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:c.message)||"Data product tidak ditemukan",icon:"error",timer:5e3,timerProgressBar:!0,confirmButtonText:"Kembali"}).then(({isConfirmed:r,dismiss:l})=>{(r||l=="timer")&&k()})}).finally(()=>T()),e.value=h.value(o.value),console.log(e.value)},w=()=>{y.value=e.value,m.value=!0},D=f=>{d.setItemByUrl(o.value,f),S()},T=I(()=>{e.value||S()});return(f,t)=>{var c,r;const a=j("FontAwesomeIcon");return g(),v("div",M,[s("h2",W,p((c=e.value)==null?void 0:c.product_name),1),s("p",X,p((r=e.value)==null?void 0:r.short_location),1),s("div",Y,[s("div",z,[s("div",G,[(g(!0),v(P,null,E(e.value.images,(l,B)=>{var x;return g(),v("div",{key:B,class:"mr-3"},[s("img",{src:(x=e.value)==null?void 0:x.images[B],alt:`Logo ${e.value.product_name}`,width:"150",height:"150",style:{"object-fit":"cover"}},null,8,J)])}),128)),s("div",O,p(e.value.description),1)]),s("div",Q,[s("a",{href:"javascript:void(0)",rel:"noopener noreferrer",class:"btn btn-info btn-icon mr-2",onClick:w},[_(a,{icon:["fas","edit"],class:"mr-1"}),F(" Ubah ")])])])]),_(L,{visible:m.value,"onUpdate:visible":t[0]||(t[0]=l=>m.value=l),"init-data":y.value,"is-edit":"",onSubmit:D},null,8,["visible","init-data"]),_(K,{visible:b.value,"onUpdate:visible":t[1]||(t[1]=l=>b.value=l),slug:o.value},null,8,["visible","slug"])])}}};export{oe as default};
